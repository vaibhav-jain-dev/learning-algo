# DSAlgo Learn Platform - Development Dockerfile
# For hot-reload development

FROM golang:1.21-alpine

# Install dependencies
RUN apk add --no-cache \
    python3 \
    py3-pip \
    wget \
    git

# Install air for Go hot reload
RUN go install github.com/cosmtrek/air@latest

WORKDIR /app

# Copy go mod files and download deps
COPY backend/go.mod backend/go.sum ./backend/
RUN cd backend && go mod download

# Copy source (will be overridden by volume mount)
COPY backend/ ./backend/
COPY frontend/ ./frontend/
COPY problems/ ./problems/

EXPOSE 8080

# Run with air for hot reload
CMD ["air", "-c", ".air.toml"]
