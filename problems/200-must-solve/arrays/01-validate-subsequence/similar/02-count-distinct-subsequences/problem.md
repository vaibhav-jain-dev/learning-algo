# Count Distinct Subsequences

**Difficulty:** Hard (Red)

## Problem Statement

Given two strings `s` and `t`, return the number of distinct subsequences of `s` which equals `t`.

A subsequence is a sequence that can be derived from another sequence by deleting some or no elements without changing the order of the remaining elements.

## Examples

**Example 1:**
```
Input: s = "rabbbit", t = "rabbit"
Output: 3
Explanation: There are 3 ways to choose "rabbit" from "rabbbit"
```

**Example 2:**
```
Input: s = "babgbag", t = "bag"
Output: 5
Explanation: 5 different ways to form "bag" from "babgbag"
```

## Constraints

- 1 <= s.length, t.length <= 1000
- s and t consist of English letters

---

## ğŸ§  Thought Process & Pattern Recognition

<details>
<summary><strong>Click to reveal thinking pattern</strong></summary>

### Step 1: Understand the Core Problem
**Question:** "For each character, what choices do I have?"

At each position in `s`:
- If s[i] == t[j]: TWO choices!
  1. USE this match (move both pointers)
  2. SKIP this match (maybe better match later)
- If s[i] != t[j]: Only ONE choice - skip this character

### Step 2: Identify the Pattern
**Key insight:** This is **DP with counting**, not optimization:
- We ADD ways (not max/min)
- Each match gives us two paths to explore

### Step 3: Define the Recurrence
```
If s[i-1] == t[j-1]:
    dp[i][j] = dp[i-1][j-1] + dp[i-1][j]
              (use match)    (skip match)
Else:
    dp[i][j] = dp[i-1][j]   // skip s[i-1]
```

### Step 4: Base Case
- `dp[i][0] = 1` for all i (empty t can be formed in exactly 1 way)
- `dp[0][j] = 0` for j > 0 (can't form non-empty t from empty s)

</details>

---

## ğŸ“Š Visual Diagram: How It Works

<details>
<summary><strong>Click to see step-by-step visualization</strong></summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COUNT DISTINCT SUBSEQUENCES VISUALIZATION                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  s = "rabbbit"                                                               â”‚
â”‚  t = "rabbit"                                                                â”‚
â”‚                                                                              â”‚
â”‚  Building the DP Table (dp[i][j] = ways to form t[0:j] from s[0:i]):        â”‚
â”‚                                                                              â”‚
â”‚           ""    r    a    b    b    i    t                                   â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”                          â”‚
â”‚   ""   â”‚  1  â”‚  0  â”‚  0  â”‚  0  â”‚  0  â”‚  0  â”‚  0  â”‚  â† Empty s can only     â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤    form empty t          â”‚
â”‚   r    â”‚  1  â”‚  1  â”‚  0  â”‚  0  â”‚  0  â”‚  0  â”‚  0  â”‚  â† 'r' matches 'r'      â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤                          â”‚
â”‚   a    â”‚  1  â”‚  1  â”‚  1  â”‚  0  â”‚  0  â”‚  0  â”‚  0  â”‚  â† 'a' matches 'a'      â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤                          â”‚
â”‚   b    â”‚  1  â”‚  1  â”‚  1  â”‚  1  â”‚  0  â”‚  0  â”‚  0  â”‚  â† first 'b' match      â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤                          â”‚
â”‚   b    â”‚  1  â”‚  1  â”‚  1  â”‚  2  â”‚  1  â”‚  0  â”‚  0  â”‚  â† second 'b': 2 ways!  â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤                          â”‚
â”‚   b    â”‚  1  â”‚  1  â”‚  1  â”‚  3  â”‚  3  â”‚  0  â”‚  0  â”‚  â† third 'b': 3 ways!   â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤                          â”‚
â”‚   i    â”‚  1  â”‚  1  â”‚  1  â”‚  3  â”‚  3  â”‚  3  â”‚  0  â”‚  â† 'i' matches 'i'      â”‚
â”‚        â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤                          â”‚
â”‚   t    â”‚  1  â”‚  1  â”‚  1  â”‚  3  â”‚  3  â”‚  3  â”‚  3  â”‚  â† 't' matches 't' âœ“   â”‚
â”‚        â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                              â”‚
â”‚  Answer: dp[7][6] = 3 ways                                                   â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         KEY INSIGHT: THE THREE B's                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  s = "r a bâ‚ bâ‚‚ bâ‚ƒ i t"                                                     â”‚
â”‚  t = "r a b  b  i  t"                                                        â”‚
â”‚                                                                              â”‚
â”‚  Three ways to pick two b's from three b's:                                  â”‚
â”‚                                                                              â”‚
â”‚  Way 1: Use bâ‚ and bâ‚‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  s: [ r ][ a ][â–ºbâ‚][â–ºbâ‚‚][ bâ‚ƒ][ i ][ t ]                            â”‚   â”‚
â”‚  â”‚  t: [ r ][ a ][â–ºb ][â–ºb ][ i ][ t ]                                  â”‚   â”‚
â”‚  â”‚  Match: r-a-bâ‚-bâ‚‚-i-t                                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  Way 2: Use bâ‚ and bâ‚ƒ                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  s: [ r ][ a ][â–ºbâ‚][ bâ‚‚][â–ºbâ‚ƒ][ i ][ t ]                            â”‚   â”‚
â”‚  â”‚  t: [ r ][ a ][â–ºb ][â–ºb ][ i ][ t ]                                  â”‚   â”‚
â”‚  â”‚  Match: r-a-bâ‚-bâ‚ƒ-i-t                                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  Way 3: Use bâ‚‚ and bâ‚ƒ                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  s: [ r ][ a ][ bâ‚][â–ºbâ‚‚][â–ºbâ‚ƒ][ i ][ t ]                            â”‚   â”‚
â”‚  â”‚  t: [ r ][ a ][â–ºb ][â–ºb ][ i ][ t ]                                  â”‚   â”‚
â”‚  â”‚  Match: r-a-bâ‚‚-bâ‚ƒ-i-t                                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         WHY dp[5][4] = 3?                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  At s[4]='bâ‚ƒ' and t[3]='b' (second 'b' in target):                         â”‚
â”‚                                                                              â”‚
â”‚  dp[5][4] = dp[4][3] + dp[4][4]                                             â”‚
â”‚           = (use bâ‚ƒ)  + (skip bâ‚ƒ)                                           â”‚
â”‚           =    2      +    1                                                 â”‚
â”‚           =    3                                                             â”‚
â”‚                                                                              â”‚
â”‚  The 2 comes from: ways to form "rab" using "rabbb" before this b           â”‚
â”‚  The 1 comes from: ways to form "rabb" using "rabb" before this b           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

</details>

---

## Solution Approaches

### Approach 1: Dynamic Programming (2D Table) â­ RECOMMENDED

**Time Complexity:** O(m Ã— n)
**Space Complexity:** O(m Ã— n)

**Why this is best:**
- Clear counting logic
- Easy to trace and debug
- Handles large inputs well

### Approach 2: Space-Optimized DP

**Time Complexity:** O(m Ã— n)
**Space Complexity:** O(n)

**Key trick:** Process right-to-left to avoid using updated values.

### Approach 3: Recursive with Memoization

**Time Complexity:** O(m Ã— n)
**Space Complexity:** O(m Ã— n)

**When to use:** More intuitive top-down thinking.

---

## ğŸ“ˆ Complexity Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Approach            â”‚     Time     â”‚    Space     â”‚  Recommendation â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2D DP Table                 â”‚   O(m Ã— n)   â”‚   O(m Ã— n)   â”‚  â­ BEST       â”‚
â”‚ Space-Optimized DP          â”‚   O(m Ã— n)   â”‚    O(n)      â”‚  âœ“ Low memory  â”‚
â”‚ Recursive + Memo            â”‚   O(m Ã— n)   â”‚   O(m Ã— n)   â”‚  âœ“ Intuitive   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
