/* ============================================
   SMART WIDESCREEN LAYOUTS
   Intelligent use of space without ugly stretching
   ============================================ */

/* ============================================
   CORE PRINCIPLE: Comfortable Reading Width
   Text should never exceed ~70-80 characters per line
   Extra space is used for complementary content
   ============================================ */

/* Base content comfortable width */
:root {
    --reading-width: 750px;  /* Optimal for reading */
    --wide-reading-width: 900px;  /* For tables/code */
    --side-panel-width: 280px;  /* For TOC/related content */
}

/* ============================================
   TOPIC DETAIL PAGES - SMART ARCHITECTURE LAYOUTS
   ============================================ */

/* Topic detail pages need more space for diagrams */
.topic-detail-page {
    max-width: 900px; /* Default for text-heavy content */
    margin: 0 auto;
    padding: 0 1rem;
}

/* System design and architecture pages need wider space */
.topic-detail-page.architecture-content,
.topic-detail-page.system-design-content {
    max-width: 1200px; /* More space for diagrams */
}

@media (min-width: 1400px) {
    .topic-detail-page.architecture-content,
    .topic-detail-page.system-design-content {
        max-width: 1400px; /* Even more on widescreen */
    }
}

/* Text content stays comfortable */
.topic-content > p,
.topic-content > ul:not(.topic-meta),
.topic-content > ol {
    max-width: 75ch; /* ~750px, comfortable reading */
}

/* Tables and diagrams can use more space */
.topic-content table,
.topic-content div[style*="display: grid"],
.topic-content div[style*="display: flex"] {
    max-width: 1200px;
}

@media (min-width: 1400px) {
    .topic-content div[style*="display: flex; flex-direction: column; align-items: center"],
    .topic-content div[style*="ARCHITECTURE"],
    .topic-content div[style*="DIAGRAM"] {
        max-width: 1400px !important;
    }
}

/* ============================================
   UNIFIED LESSONS - SMART DATABASE LESSONS LAYOUT
   ============================================ */

/* Comfortable reading width for lesson text */
.unified-lessons .lesson {
    max-width: 750px;
}

/* Lesson text stays narrow */
.unified-lessons .lesson > p,
.unified-lessons .lesson > ul,
.unified-lessons .lesson > ol,
.unified-lessons .lesson > h2,
.unified-lessons .lesson > h3 {
    max-width: 75ch; /* ~750px */
}

/* Query editors and code blocks can be wider */
.unified-lessons .lesson .inline-sql-editor,
.unified-lessons .lesson .inline-editor-wrapper,
.unified-lessons .lesson .example-query,
.unified-lessons .lesson pre,
.unified-lessons .lesson .code-example {
    max-width: 900px;
}

/* Tables use available space */
.unified-lessons .lesson table {
    max-width: 900px;
}

/* Query workspace with side panel on widescreen */
@media (min-width: 1400px) {
    .query-workspace {
        display: grid;
        grid-template-columns: 900px 1fr;
        gap: 2rem;
        max-width: 1400px;
    }

    .query-editor-section {
        /* Query editor stays at 900px */
    }

    .query-results-panel {
        position: sticky;
        top: calc(var(--header-height, 64px) + 1rem);
        align-self: start;
        max-height: calc(100vh - var(--header-height, 64px) - 2rem);
        overflow-y: auto;
        background: var(--color-bg-secondary, #f8fafc);
        border-radius: var(--radius-lg, 0.75rem);
        padding: 1rem;
        border: 1px solid var(--color-border, #e2e8f0);
    }

    /* Side-by-side comparisons */
    .unified-lessons .lesson .comparison-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        max-width: 900px;
    }
}

/* Mobile: Stack query and results vertically */
@media (max-width: 1399px) {
    .query-workspace {
        display: block;
    }
}

/* ============================================
   CONTENT SECTIONS - SMART SIDE-BY-SIDE
   ============================================ */

/* Two-column layout for comparison sections */
.content-comparison {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
}

@media (min-width: 768px) {
    .content-comparison {
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
    }
}

/* Magazine-style layout for rich content */
.magazine-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
}

@media (min-width: 1200px) {
    .magazine-layout {
        grid-template-columns: 2fr 1fr;
        gap: 3rem;
    }

    /* Main article */
    .magazine-layout > .main-article {
        max-width: var(--reading-width);
    }

    /* Sidebar content (images, diagrams, callouts) */
    .magazine-layout > .sidebar-content {
        position: sticky;
        top: calc(var(--header-height) + 1rem);
        align-self: start;
    }
}

/* ============================================
   GUIDE PAGES - OPTIMAL LAYOUT (Go/Python)
   ============================================ */

.guide-layout {
    display: flex;
    gap: 2rem;
    margin-top: 1rem;
    max-width: 1600px;
    margin-left: auto;
    margin-right: auto;
    padding: 0 1rem;
}

.guide-sidebar {
    position: sticky;
    top: 1rem;
    width: 240px;
    min-width: 240px;
    max-height: calc(100vh - 2rem);
    overflow-y: auto;
    align-self: flex-start;
    flex-shrink: 0;
}

.guide-content {
    flex: 1;
    min-width: 0;
    max-width: 900px; /* Limit for comfortable reading */
}

/* Tables, roadmap grids, and code can be wider */
.guide-content table,
.guide-content .roadmap-grid,
.guide-content pre,
.guide-content .code-example {
    max-width: 1000px;
}

/* SVG diagrams can use more space */
.guide-content .visual-memory-diagram,
.guide-content .visual-example-diagram {
    max-width: 100%;
}

@media (min-width: 1400px) {
    .guide-layout {
        max-width: 1800px;
    }

    .guide-content {
        max-width: 1000px;
    }

    /* Diagrams can break out slightly */
    .guide-content .visual-memory-diagram svg,
    .guide-content .visual-example-diagram svg {
        max-width: 110%;
        margin-left: -5%;
    }
}

@media (max-width: 900px) {
    .guide-layout {
        flex-direction: column;
    }

    .guide-sidebar {
        position: static;
        width: 100%;
        max-height: 200px;
        overflow-x: auto;
        overflow-y: hidden;
    }
}

/* ============================================
   INLINE CONTENT - SMART ADAPTATIONS
   ============================================ */

/* Styled divs with side-by-side content */
div[style*="display: grid"][style*="grid-template-columns: 1fr 1fr"],
div[style*="display: flex"][style*="gap"] {
    max-width: var(--wide-reading-width) !important;
}

/* Tables should be wider than text */
table {
    max-width: var(--wide-reading-width);
}

/* Code blocks can be wider */
pre,
.code-example,
.code-content {
    max-width: var(--wide-reading-width);
}

/* Diagrams can use more space */
.diagram-container,
div[style*="display: flex; flex-direction: column; align-items: center"] {
    max-width: var(--wide-reading-width) !important;
}

/* ============================================
   VISUAL HIERARCHY - BETTER SPACING
   ============================================ */

/* Paragraphs optimal line length */
p {
    max-width: 75ch; /* 75 characters max */
}

/* Headings can be slightly wider */
h1, h2, h3, h4, h5, h6 {
    max-width: 80ch;
}

/* Lists comfortable width */
ul, ol {
    max-width: 70ch;
}

/* ============================================
   GRID CARDS - RESPONSIVE COLUMNS
   ============================================ */

/* Topic grids - smart columns based on available space */
.topic-grid {
    display: grid;
    gap: 1.5rem;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 320px), 1fr));
}

@media (min-width: 768px) {
    .topic-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }
}

@media (min-width: 1200px) {
    .topic-grid {
        grid-template-columns: repeat(3, 1fr);
        max-width: 1200px;
        margin: 0 auto;
    }
}

@media (min-width: 1600px) {
    .topic-grid {
        grid-template-columns: repeat(4, 1fr);
        max-width: 1400px;
    }
}

/* ============================================
   CODE BLOCKS - SMART WIDTH
   ============================================ */

/* Code blocks use available space but don't get too wide */
pre {
    max-width: min(100%, var(--wide-reading-width));
    overflow-x: auto;
}

@media (min-width: 1400px) {
    /* On very wide screens, code can use more space */
    pre {
        max-width: 1000px;
    }
}

/* ============================================
   IMAGES AND MEDIA - RESPONSIVE
   ============================================ */

img {
    max-width: 100%;
    height: auto;
}

/* Diagrams and illustrations can be larger */
.diagram,
.illustration,
figure {
    max-width: var(--wide-reading-width);
    margin: 2rem auto;
}

@media (min-width: 1400px) {
    .diagram,
    .illustration,
    figure {
        max-width: 1000px;
    }
}

/* ============================================
   MOBILE - KEEP SIMPLE SINGLE COLUMN
   ============================================ */

@media (max-width: 767px) {
    /* All content full width on mobile */
    .topic-content-wrapper,
    .magazine-layout,
    .guide-layout {
        grid-template-columns: 1fr !important;
    }

    /* Reset max-widths on mobile */
    p, h1, h2, h3, h4, h5, h6, ul, ol, pre, table {
        max-width: 100% !important;
    }

    /* Hide side panels on mobile */
    .side-panel,
    .guide-right-panel,
    .sidebar-content {
        display: none !important;
    }
}

/* ============================================
   PRINT - OPTIMIZE FOR PAPER
   ============================================ */

@media print {
    :root {
        --reading-width: 100%;
        --wide-reading-width: 100%;
    }

    .side-panel,
    .guide-right-panel,
    .sidebar-content,
    .guide-sidebar {
        display: none !important;
    }

    .guide-layout,
    .magazine-layout,
    .topic-content-wrapper {
        grid-template-columns: 1fr !important;
    }
}

/* ============================================
   ACCESSIBILITY - FOCUS MANAGEMENT
   ============================================ */

/* Ensure sticky elements don't cover focused content */
*:focus-within {
    scroll-margin-top: calc(var(--header-height) + 2rem);
}

/* ============================================
   PERFORMANCE - GPU ACCELERATION
   ============================================ */

.guide-sidebar,
.side-panel,
.guide-right-panel {
    will-change: transform;
    transform: translateZ(0);
}
