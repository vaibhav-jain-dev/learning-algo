<div class="guide-page">
    <nav class="breadcrumb">
        <a href="/">Home</a> <span class="breadcrumb-sep">/</span> <span>Go Development</span>
    </nav>

    <div class="guide-header">
        <div class="guide-header-content">
            <span class="guide-badge go-badge">Go 1.21+</span>
            <h1>Go API Development Guide</h1>
            <p class="guide-description">Master Go for building high-performance APIs - from language basics to advanced concurrency patterns</p>
        </div>
    </div>

    <!-- MAIN LAYOUT WITH SIDEBAR -->
    <div class="guide-layout">
        <!-- FIXED SIDEBAR NAVIGATION -->
        <aside class="guide-sidebar">
            <div class="sidebar-header">Topics</div>

            <div class="sidebar-section">
                <div class="sidebar-section-title">Language Fundamentals</div>
                <a href="#variables-types" class="sidebar-link" onclick="scrollToTopic('variables-types'); return false;">Variables & Types</a>
                <a href="#functions-defer" class="sidebar-link" onclick="scrollToTopic('functions-defer'); return false;">Functions & Defer</a>
                <a href="#structs-methods" class="sidebar-link" onclick="scrollToTopic('structs-methods'); return false;">Structs & Methods</a>
                <a href="#interfaces" class="sidebar-link" onclick="scrollToTopic('interfaces'); return false;">Interfaces</a>
                <a href="#error-handling" class="sidebar-link" onclick="scrollToTopic('error-handling'); return false;">Error Handling</a>
                <a href="#pointers-section" class="sidebar-link active" onclick="scrollToTopic('pointers-section'); return false;">Pointers</a>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-section-title">Compiler & Runtime</div>
                <a href="#compilation" class="sidebar-link" onclick="scrollToTopic('compilation'); return false;">Compilation Pipeline</a>
                <a href="#escape-analysis" class="sidebar-link" onclick="scrollToTopic('escape-analysis'); return false;">Escape Analysis</a>
                <a href="#gc" class="sidebar-link" onclick="scrollToTopic('gc'); return false;">Garbage Collection</a>
                <a href="#scheduler" class="sidebar-link" onclick="scrollToTopic('scheduler'); return false;">Go Scheduler</a>
                <a href="#profiling" class="sidebar-link" onclick="scrollToTopic('profiling'); return false;">Profiling</a>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-section-title">Concurrency & APIs</div>
                <a href="#goroutines" class="sidebar-link" onclick="scrollToTopic('goroutines'); return false;">Goroutines</a>
                <a href="#channels" class="sidebar-link" onclick="scrollToTopic('channels'); return false;">Channels</a>
                <a href="#select" class="sidebar-link" onclick="scrollToTopic('select'); return false;">Select Statement</a>
                <a href="#sync" class="sidebar-link" onclick="scrollToTopic('sync'); return false;">Sync Package</a>
                <a href="#context" class="sidebar-link" onclick="scrollToTopic('context'); return false;">Context</a>
                <a href="#http" class="sidebar-link" onclick="scrollToTopic('http'); return false;">HTTP Server</a>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-section-title">System Design</div>
                <a href="#middleware" class="sidebar-link" onclick="scrollToTopic('middleware'); return false;">Middleware</a>
                <a href="#database" class="sidebar-link" onclick="scrollToTopic('database'); return false;">Database</a>
                <a href="#testing" class="sidebar-link" onclick="scrollToTopic('testing'); return false;">Testing</a>
                <a href="#docker" class="sidebar-link" onclick="scrollToTopic('docker'); return false;">Docker</a>
                <a href="#observability" class="sidebar-link" onclick="scrollToTopic('observability'); return false;">Observability</a>
                <a href="#graceful" class="sidebar-link" onclick="scrollToTopic('graceful'); return false;">Graceful Shutdown</a>
            </div>
        </aside>

        <!-- MAIN CONTENT AREA -->
        <main class="guide-content">
    <section class="roadmap-section">
        <h2 class="roadmap-title">Go Learning Roadmap</h2>
        <p class="roadmap-subtitle">Click topic titles to jump to content, or visit official docs</p>

        <div class="roadmap-grid">
            <!-- Language Fundamentals Column -->
            <div class="roadmap-column">
                <h3 class="column-title fundamentals">Language Fundamentals</h3>

                <div class="roadmap-card">
                    <a href="#variables-types" class="card-title-link" onclick="scrollToTopic('variables-types'); return false;">
                        <h4>Variables & Types</h4>
                    </a>
                    <ul>
                        <li>Zero values</li>
                        <li>Type inference</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/ref/spec" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go variables and types including zero values and type inference with examples')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#functions-defer" class="card-title-link" onclick="scrollToTopic('functions-defer'); return false;">
                        <h4>Functions & Defer</h4>
                    </a>
                    <ul>
                        <li>Multiple returns</li>
                        <li>Named returns</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/doc/effective_go" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go functions including multiple returns, named returns, and defer with examples')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#structs-methods" class="card-title-link" onclick="scrollToTopic('structs-methods'); return false;">
                        <h4>Structs & Methods</h4>
                    </a>
                    <ul>
                        <li>Embedding</li>
                        <li>Composition</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/doc/effective_go#composite_literals" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go structs and methods including embedding and composition with examples')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#interfaces" class="card-title-link" onclick="scrollToTopic('interfaces'); return false;">
                        <h4>Interfaces</h4>
                    </a>
                    <ul>
                        <li>Implicit impl</li>
                        <li>Interface design</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/doc/effective_go#interfaces" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go interfaces including implicit implementation and interface design patterns')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#error-handling" class="card-title-link" onclick="scrollToTopic('error-handling'); return false;">
                        <h4>Error Handling</h4>
                    </a>
                    <ul>
                        <li>Wrapping</li>
                        <li>Custom errors</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/blog/error-handling-and-go" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go error handling including wrapping, custom errors, and errors.Is/As')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card highlight-card">
                    <a href="#pointers-section" class="card-title-link" onclick="scrollToTopic('pointers-section'); return false;">
                        <h4>Pointers</h4>
                    </a>
                    <ul>
                        <li>& vs * operators</li>
                        <li>Value vs Reference</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/tour/moretypes/1" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go pointers including & vs * operators, value vs reference semantics with visual examples')">Copy Prompt</button>
                    </div>
                </div>
            </div>

            <!-- Compiler & Runtime Column -->
            <div class="roadmap-column">
                <h3 class="column-title compiler">Compiler & Runtime</h3>

                <div class="roadmap-card">
                    <a href="#compilation" class="card-title-link" onclick="scrollToTopic('compilation'); return false;">
                        <h4>Compilation Pipeline</h4>
                    </a>
                    <ul>
                        <li>AST</li>
                        <li>SSA</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/doc/cmd" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go compilation pipeline including AST parsing and SSA form')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#escape-analysis" class="card-title-link" onclick="scrollToTopic('escape-analysis'); return false;">
                        <h4>Escape Analysis</h4>
                    </a>
                    <ul>
                        <li>Stack vs Heap</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://www.ardanlabs.com/blog/2017/05/language-mechanics-on-escape-analysis.html" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go escape analysis including stack vs heap allocation decisions')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#scheduler" class="card-title-link" onclick="scrollToTopic('scheduler'); return false;">
                        <h4>Scheduler (GMP)</h4>
                    </a>
                    <ul>
                        <li>Work stealing</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/src/runtime/proc.go" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go GMP scheduler model including goroutines, machine threads, and work stealing')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#gc" class="card-title-link" onclick="scrollToTopic('gc'); return false;">
                        <h4>Garbage Collector</h4>
                    </a>
                    <ul>
                        <li>Tri-color</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://tip.golang.org/doc/gc-guide" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go garbage collector including tri-color marking algorithm')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#profiling" class="card-title-link" onclick="scrollToTopic('profiling'); return false;">
                        <h4>Profiling</h4>
                    </a>
                    <ul>
                        <li>pprof, trace</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/blog/pprof" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go profiling with pprof including CPU, memory, and trace profiling')">Copy Prompt</button>
                    </div>
                </div>
            </div>

            <!-- Concurrency & APIs Column -->
            <div class="roadmap-column">
                <h3 class="column-title concurrency">Concurrency & APIs</h3>

                <div class="roadmap-card">
                    <a href="#goroutines" class="card-title-link" onclick="scrollToTopic('goroutines'); return false;">
                        <h4>Goroutines</h4>
                    </a>
                    <ul>
                        <li>Lightweight threads</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/doc/faq#goroutines" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go goroutines including creation, lifecycle, and best practices')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#channels" class="card-title-link" onclick="scrollToTopic('channels'); return false;">
                        <h4>Channels</h4>
                    </a>
                    <ul>
                        <li>Pipelines</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/blog/pipelines" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go channels including buffered channels, pipelines, and fan-out/fan-in')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#sync" class="card-title-link" onclick="scrollToTopic('sync'); return false;">
                        <h4>Mutex / Sync</h4>
                    </a>
                    <ul>
                        <li>sync package</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://pkg.go.dev/sync" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go sync package including Mutex, RWMutex, WaitGroup, and sync.Map')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#context" class="card-title-link" onclick="scrollToTopic('context'); return false;">
                        <h4>Context</h4>
                    </a>
                    <ul>
                        <li>Cancellation</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/blog/context" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go context package including timeouts, cancellation, and value propagation')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#http" class="card-title-link" onclick="scrollToTopic('http'); return false;">
                        <h4>HTTP / REST</h4>
                    </a>
                    <ul>
                        <li>net/http package</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://pkg.go.dev/net/http" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go HTTP servers and clients including handlers, middleware, and REST API patterns')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#select" class="card-title-link" onclick="scrollToTopic('select'); return false;">
                        <h4>Select Statement</h4>
                    </a>
                    <ul>
                        <li>Multi-channel ops</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/tour/concurrency/5" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go select statement for multiplexing channel operations')">Copy Prompt</button>
                    </div>
                </div>
            </div>

            <!-- System Design & Production Column -->
            <div class="roadmap-column">
                <h3 class="column-title production">System Design & Production</h3>

                <div class="roadmap-card">
                    <a href="#middleware" class="card-title-link" onclick="scrollToTopic('middleware'); return false;">
                        <h4>Middleware</h4>
                    </a>
                    <ul>
                        <li>Request handling</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/doc/articles/wiki/" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go middleware patterns for HTTP request handling')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#database" class="card-title-link" onclick="scrollToTopic('database'); return false;">
                        <h4>Database</h4>
                    </a>
                    <ul>
                        <li>SQL, connection pooling</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://pkg.go.dev/database/sql" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go database patterns including SQL, connection pooling, and transactions')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#testing" class="card-title-link" onclick="scrollToTopic('testing'); return false;">
                        <h4>Testing</h4>
                    </a>
                    <ul>
                        <li>Unit, integration tests</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://go.dev/doc/tutorial/add-a-test" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go testing including unit tests, table-driven tests, and mocking')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#docker" class="card-title-link" onclick="scrollToTopic('docker'); return false;">
                        <h4>Docker</h4>
                    </a>
                    <ul>
                        <li>Multi-stage builds</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://docs.docker.com/language/golang/" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go deployment with Docker including multi-stage builds and optimization')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#observability" class="card-title-link" onclick="scrollToTopic('observability'); return false;">
                        <h4>Observability</h4>
                    </a>
                    <ul>
                        <li>Metrics, Logs, Traces</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://opentelemetry.io/docs/instrumentation/go/" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain observability in Go including OpenTelemetry, metrics, logging, and distributed tracing')">Copy Prompt</button>
                    </div>
                </div>

                <div class="roadmap-card">
                    <a href="#graceful" class="card-title-link" onclick="scrollToTopic('graceful'); return false;">
                        <h4>Graceful Shutdown</h4>
                    </a>
                    <ul>
                        <li>Signal handling</li>
                    </ul>
                    <div class="card-actions">
                        <a href="https://pkg.go.dev/os/signal" target="_blank" class="docs-link">Docs</a>
                        <button class="copy-prompt-btn" onclick="copyPrompt('Explain Go graceful shutdown including signal handling and connection draining')">Copy Prompt</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- VARIABLES & TYPES SECTION -->
    <section id="variables-types" class="guide-section">
        <div class="section-header">
            <h2><span class="section-icon">&#128221;</span> Variables & Types</h2>
            <p class="section-description">Go's type system, zero values, and type inference</p>
        </div>

        <div class="topic-block highlight-block">
            <div class="block-header">
                <span class="block-icon">&#128161;</span>
                <h3>Why Go for APIs?</h3>
            </div>
            <p>Go was designed at Google to handle large-scale systems. It combines the simplicity of Python with the performance of C, making it ideal for building APIs, microservices, and concurrent applications.</p>

            <div class="concept-grid">
                <div class="concept-card">
                    <span class="concept-icon">&#9889;</span>
                    <h4>Fast Compilation</h4>
                    <p>Compile in seconds, not minutes</p>
                </div>
                <div class="concept-card">
                    <span class="concept-icon">&#128640;</span>
                    <h4>High Performance</h4>
                    <p>Near C-level speed with GC</p>
                </div>
                <div class="concept-card">
                    <span class="concept-icon">&#128101;</span>
                    <h4>Built-in Concurrency</h4>
                    <p>Goroutines and channels</p>
                </div>
                <div class="concept-card">
                    <span class="concept-icon">&#128230;</span>
                    <h4>Simple Deployment</h4>
                    <p>Single static binary</p>
                </div>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#127968;</span>
                <h3>Hello World and Program Structure</h3>
            </div>
            <p>Every Go program starts with a <code>package</code> declaration. The <code>main</code> package is special - it defines an executable program.</p>

            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "fmt"
    "time"
)

// main is the entry point of the program
func main() {
    // Print to console
    fmt.Println("Hello, Go!")

    // Variables
    name := "Gopher"  // Short declaration (type inferred)
    var age int = 10  // Explicit type

    fmt.Printf("Name: %s, Age: %d\n", name, age)

    // Current time
    fmt.Println("Current time:", time.Now().Format("2006-01-02 15:04:05"))
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128221;</span>
                <h3>Variables and Data Types</h3>
            </div>
            <p>Go is statically typed but has type inference. Understanding types is essential for building robust APIs.</p>

            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

func main() {
    // Basic types
    var name string = "Alice"
    var age int = 30
    var price float64 = 19.99
    var isActive bool = true

    // Short declaration (most common)
    email := "alice@example.com"
    count := 42

    fmt.Println("=== Basic Types ===")
    fmt.Printf("name: %s (type: %T)\n", name, name)
    fmt.Printf("age: %d (type: %T)\n", age, age)
    fmt.Printf("price: %.2f (type: %T)\n", price, price)
    fmt.Printf("isActive: %v (type: %T)\n", isActive, isActive)
    fmt.Printf("email: %s\n", email)

    // Zero values (default values)
    var defaultInt int
    var defaultString string
    var defaultBool bool
    var defaultFloat float64

    fmt.Println("\n=== Zero Values ===")
    fmt.Printf("int: %d, string: %q, bool: %v, float: %f\n",
        defaultInt, defaultString, defaultBool, defaultFloat)

    // Constants
    const MaxUsers = 1000
    const ApiVersion = "v1"

    fmt.Println("\n=== Constants ===")
    fmt.Printf("MaxUsers: %d, API: %s\n", MaxUsers, ApiVersion)

    // Multiple assignment
    x, y := 10, 20
    x, y = y, x  // Swap values
    fmt.Printf("\n=== After swap: x=%d, y=%d ===\n", x, y)

    // Type conversion (explicit)
    var numInt int = 42
    var numFloat float64 = float64(numInt)
    var numStr string = fmt.Sprintf("%d", numInt)

    fmt.Printf("\nConverted: int=%d, float=%.1f, string=%q\n",
        numInt, numFloat, numStr)
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128260;</span>
                <h3>Control Structures</h3>
            </div>
            <p>Go has simplified control structures - no parentheses needed, and braces are always required.</p>

            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

func main() {
    // If-else (no parentheses needed)
    score := 85

    fmt.Println("=== If-Else ===")
    if score >= 90 {
        fmt.Println("Grade: A")
    } else if score >= 80 {
        fmt.Println("Grade: B")
    } else {
        fmt.Println("Grade: C")
    }

    // If with initialization statement
    if length := len("hello"); length > 3 {
        fmt.Printf("String length %d is greater than 3\n", length)
    }

    // Switch (no break needed - implicit)
    fmt.Println("\n=== Switch ===")
    day := "Monday"
    switch day {
    case "Monday", "Tuesday", "Wednesday", "Thursday", "Friday":
        fmt.Println("Weekday")
    case "Saturday", "Sunday":
        fmt.Println("Weekend")
    default:
        fmt.Println("Unknown day")
    }

    // Switch without expression (like if-else chain)
    hour := 14
    switch {
    case hour < 12:
        fmt.Println("Good morning!")
    case hour < 17:
        fmt.Println("Good afternoon!")
    default:
        fmt.Println("Good evening!")
    }

    // For loop (Go's only loop construct)
    fmt.Println("\n=== For Loop ===")

    // Traditional for
    for i := 0; i < 3; i++ {
        fmt.Printf("i = %d\n", i)
    }

    // While-style
    count := 0
    for count < 3 {
        fmt.Printf("count = %d\n", count)
        count++
    }

    // Range over slice
    fmt.Println("\n=== Range ===")
    colors := []string{"red", "green", "blue"}
    for index, color := range colors {
        fmt.Printf("Index %d: %s\n", index, color)
    }

    // Range over map
    ages := map[string]int{"Alice": 30, "Bob": 25}
    for name, age := range ages {
        fmt.Printf("%s is %d years old\n", name, age)
    }
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#9881;</span>
                <h3>Functions</h3>
            </div>
            <p>Functions in Go can return multiple values - commonly used for returning results and errors.</p>

            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "errors"
    "fmt"
)

// Basic function
func greet(name string) string {
    return "Hello, " + name + "!"
}

// Multiple return values (common pattern: result + error)
func divide(a, b float64) (float64, error) {
    if b == 0 {
        return 0, errors.New("cannot divide by zero")
    }
    return a / b, nil
}

// Named return values
func calculate(x, y int) (sum, product int) {
    sum = x + y
    product = x * y
    return  // "naked" return - returns named values
}

// Variadic function (variable number of arguments)
func sumAll(numbers ...int) int {
    total := 0
    for _, n := range numbers {
        total += n
    }
    return total
}

// Function as parameter (higher-order function)
func apply(nums []int, fn func(int) int) []int {
    result := make([]int, len(nums))
    for i, n := range nums {
        result[i] = fn(n)
    }
    return result
}

func main() {
    // Basic function call
    fmt.Println("=== Basic Function ===")
    fmt.Println(greet("Gopher"))

    // Multiple return values
    fmt.Println("\n=== Multiple Returns ===")
    result, err := divide(10, 3)
    if err != nil {
        fmt.Println("Error:", err)
    } else {
        fmt.Printf("10 / 3 = %.2f\n", result)
    }

    // Error case
    _, err = divide(10, 0)
    if err != nil {
        fmt.Println("Error:", err)
    }

    // Named returns
    fmt.Println("\n=== Named Returns ===")
    s, p := calculate(5, 3)
    fmt.Printf("Sum: %d, Product: %d\n", s, p)

    // Variadic function
    fmt.Println("\n=== Variadic Function ===")
    fmt.Println("Sum of 1,2,3:", sumAll(1, 2, 3))
    fmt.Println("Sum of 1-5:", sumAll(1, 2, 3, 4, 5))

    // Slice expansion
    nums := []int{10, 20, 30}
    fmt.Println("Sum of slice:", sumAll(nums...))

    // Function as value
    fmt.Println("\n=== Higher-Order Function ===")
    double := func(x int) int { return x * 2 }
    numbers := []int{1, 2, 3, 4}
    doubled := apply(numbers, double)
    fmt.Println("Original:", numbers)
    fmt.Println("Doubled:", doubled)

    // Closure (function that captures variables)
    fmt.Println("\n=== Closure ===")
    counter := func() func() int {
        count := 0
        return func() int {
            count++
            return count
        }
    }()

    fmt.Println("Count:", counter())
    fmt.Println("Count:", counter())
    fmt.Println("Count:", counter())
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128230;</span>
                <h3>Collections: Slices and Maps</h3>
            </div>
            <p>Slices and maps are Go's primary collection types. Understanding them is essential for API development.</p>

            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

func main() {
    // === SLICES ===
    fmt.Println("=== Slices ===")

    // Creating slices
    numbers := []int{1, 2, 3, 4, 5}
    fmt.Println("Numbers:", numbers)

    // Make with length and capacity
    scores := make([]int, 3, 10)  // len=3, cap=10
    scores[0], scores[1], scores[2] = 100, 95, 87
    fmt.Printf("Scores: %v (len=%d, cap=%d)\n", scores, len(scores), cap(scores))

    // Append
    scores = append(scores, 92, 88)
    fmt.Println("After append:", scores)

    // Slicing (creates a view, not a copy!)
    firstThree := numbers[:3]
    lastThree := numbers[2:]
    fmt.Println("First 3:", firstThree)
    fmt.Println("Last 3:", lastThree)

    // Copy (to avoid shared backing array)
    copied := make([]int, len(numbers))
    copy(copied, numbers)
    fmt.Println("Copied:", copied)

    // === MAPS ===
    fmt.Println("\n=== Maps ===")

    // Creating maps
    ages := map[string]int{
        "Alice": 30,
        "Bob":   25,
        "Carol": 35,
    }
    fmt.Println("Ages:", ages)

    // Make empty map
    users := make(map[string]string)
    users["admin"] = "admin@example.com"
    users["user1"] = "user1@example.com"
    fmt.Println("Users:", users)

    // Access and check existence
    age, exists := ages["Alice"]
    if exists {
        fmt.Printf("Alice is %d years old\n", age)
    }

    _, exists = ages["Dave"]
    fmt.Printf("Dave exists: %v\n", exists)

    // Delete
    delete(ages, "Bob")
    fmt.Println("After delete:", ages)

    // Iterate
    fmt.Println("\nIterating:")
    for name, age := range ages {
        fmt.Printf("  %s: %d\n", name, age)
    }

    // === STRUCTS AS MAP VALUES ===
    fmt.Println("\n=== Struct in Map ===")

    type User struct {
        Name  string
        Email string
        Age   int
    }

    userDB := map[int]User{
        1: {Name: "Alice", Email: "alice@example.com", Age: 30},
        2: {Name: "Bob", Email: "bob@example.com", Age: 25},
    }

    for id, user := range userDB {
        fmt.Printf("  ID %d: %s (%s)\n", id, user.Name, user.Email)
    }
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>
    </section>

    <!-- POINTERS DEEP DIVE SECTION -->
    <section id="pointers-section" class="guide-section">
        <div class="section-header">
            <h2><span class="section-icon">&#128204;</span> Go Pointers — Complete Visual Guide</h2>
            <p class="section-description">Master pointers with visual diagrams, practical examples, and interview traps</p>
        </div>

        <!-- What is a Pointer -->
        <div class="topic-block highlight-block">
            <div class="block-header">
                <span class="block-icon">&#127919;</span>
                <h3>1. What is a Pointer (Plain Meaning)</h3>
            </div>
            <p>A <strong>pointer</strong> stores the <strong>memory address</strong> of a value, not the value itself.</p>

            <div class="pointer-concept-card">
                <h4>Think of it like</h4>
                <p><strong>House vs House Address:</strong> A variable is the house (contains data). A pointer is the address (tells you where the house is).</p>
            </div>

            <!-- Visual Memory Diagram -->
            <div class="visual-memory-diagram">
                <svg viewBox="0 0 600 180" style="width: 100%; height: auto; margin: 16px 0;">
                    <!-- Variable Box -->
                    <rect x="20" y="30" width="120" height="80" fill="#dcfce7" stroke="#16a34a" stroke-width="3" rx="8"/>
                    <text x="80" y="55" font-size="14" font-weight="600" text-anchor="middle" fill="#16a34a">Variable x</text>
                    <text x="80" y="90" font-size="24" font-weight="700" text-anchor="middle" fill="#0a3069">10</text>
                    <!-- Memory Address Label -->
                    <text x="80" y="130" font-size="11" text-anchor="middle" fill="#57606a">Address: 0x12a45f8</text>

                    <!-- Pointer Box -->
                    <rect x="280" y="30" width="140" height="80" fill="#dbeafe" stroke="#2563eb" stroke-width="3" rx="8"/>
                    <text x="350" y="55" font-size="14" font-weight="600" text-anchor="middle" fill="#2563eb">Pointer p</text>
                    <text x="350" y="90" font-size="14" font-weight="700" text-anchor="middle" fill="#ea580c">→ 0x12a45f8</text>
                    <text x="350" y="130" font-size="11" text-anchor="middle" fill="#57606a">p := &x</text>

                    <!-- Arrow connecting them -->
                    <path d="M 420 70 L 520 70" stroke="#ea580c" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead1)"/>

                    <!-- Dereference box -->
                    <rect x="520" y="30" width="60" height="80" fill="#fef3c7" stroke="#d97706" stroke-width="3" rx="8"/>
                    <text x="550" y="55" font-size="12" font-weight="600" text-anchor="middle" fill="#d97706">*p</text>
                    <text x="550" y="90" font-size="20" font-weight="700" text-anchor="middle" fill="#0a3069">10</text>

                    <defs>
                        <marker id="arrowhead1" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                            <path d="M 0 0 L 10 5 L 0 10" fill="#ea580c"/>
                        </marker>
                    </defs>
                </svg>
            </div>

            <div class="pointer-concept-card success">
                <h4>Why Care?</h4>
                <p>Pointers let you <strong>modify data without copying</strong> and <strong>share state</strong> between functions. Essential for performance and mutability.</p>
            </div>
        </div>

        <!-- & vs * Section -->
        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128161;</span>
                <h3>2. & vs * (MOST IMPORTANT)</h3>
            </div>

            <div class="pointer-operators-grid">
                <div class="operator-card address-operator">
                    <h4>& → Get Address</h4>
                    <p>The <code>&</code> operator gives you the <strong>memory address</strong> of a variable.</p>
                    <svg viewBox="0 0 220 120" style="width: 100%; height: auto; margin: 12px 0;">
                        <rect x="10" y="10" width="90" height="50" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="6"/>
                        <text x="55" y="32" font-size="12" font-weight="600" text-anchor="middle" fill="#1f2937">Variable x</text>
                        <text x="55" y="52" font-size="16" font-weight="700" text-anchor="middle" fill="#2563eb">10</text>
                        <path d="M 100 35 L 130 35" stroke="#d97706" stroke-width="2" marker-end="url(#arr2)"/>
                        <text x="160" y="40" font-size="14" font-weight="700" fill="#d97706">&x</text>
                        <text x="55" y="80" font-size="10" text-anchor="middle" fill="#57606a">gets address</text>
                        <defs>
                            <marker id="arr2" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                                <path d="M 0 0 L 10 5 L 0 10" fill="#d97706"/>
                            </marker>
                        </defs>
                    </svg>
                    <pre><code class="language-go">x := 10
p := &x  // p holds address</code></pre>
                </div>
                <div class="operator-card value-operator">
                    <h4>* → Get Value from Address</h4>
                    <p>The <code>*</code> operator <strong>dereferences</strong> a pointer to get the value.</p>
                    <svg viewBox="0 0 220 120" style="width: 100%; height: auto; margin: 12px 0;">
                        <rect x="10" y="10" width="90" height="50" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="6"/>
                        <text x="55" y="32" font-size="12" font-weight="600" text-anchor="middle" fill="#1f2937">Pointer p</text>
                        <text x="55" y="52" font-size="12" font-weight="700" text-anchor="middle" fill="#ea580c">0x12a45f8</text>
                        <path d="M 100 35 L 130 35" stroke="#2563eb" stroke-width="2" marker-end="url(#arr3)"/>
                        <text x="160" y="35" font-size="14" font-weight="700" fill="#2563eb">*p</text>
                        <text x="160" y="55" font-size="16" font-weight="700" fill="#16a34a">10</text>
                        <text x="55" y="80" font-size="10" text-anchor="middle" fill="#57606a">gets value</text>
                        <defs>
                            <marker id="arr3" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                                <path d="M 0 0 L 10 5 L 0 10" fill="#2563eb"/>
                            </marker>
                        </defs>
                    </svg>
                    <pre><code class="language-go">val := *p  // = 10
*p = 20    // modify original</code></pre>
                </div>
            </div>

            <div class="pointer-concept-card warning">
                <h4>Mnemonic</h4>
                <p><code>&</code> = <strong>"where is it?"</strong> (get address) | <code>*</code> = <strong>"what's inside?"</strong> (get value)</p>
            </div>

            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

func main() {
    x := 10
    p := &x               // p points to x

    fmt.Println("x =", x)         // Output: 10
    fmt.Println("&x =", &x)       // Output: 0x... (address)
    fmt.Println("p =", p)         // Output: same address
    fmt.Println("*p =", *p)       // Output: 10

    *p = 20              // Change x via pointer
    fmt.Println("After *p = 20:")
    fmt.Println("x =", x)         // Output: 20
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <!-- When to Use Pointers -->
        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128214;</span>
                <h3>3. When to Use Pointers (Decision Rules)</h3>
            </div>

            <div class="pointer-rules-grid">
                <div class="rule-card do-rule">
                    <strong>✓ Modify Original Data</strong>
                    <p>Pass a pointer to a function to modify the original value, not a copy.</p>
                </div>
                <div class="rule-card do-rule">
                    <strong>✓ Avoid Copying Large Structs</strong>
                    <p>For structs >128 bytes, pass a pointer to avoid expensive memory copies.</p>
                </div>
                <div class="rule-card do-rule">
                    <strong>✓ Represent Optional Values</strong>
                    <p>Use pointers to distinguish nil (not set) from zero values (0, "", false).</p>
                </div>
                <div class="rule-card do-rule">
                    <strong>✓ Share State</strong>
                    <p>Multiple goroutines/functions need to modify the same data.</p>
                </div>
            </div>

            <div class="pointer-concept-card error">
                <h4>Don't Overuse</h4>
                <p>Avoid pointers for simple types (int, string) or reference types (slices, maps). They already share memory efficiently.</p>
            </div>
        </div>

        <!-- Visual Examples: Value vs Pointer -->
        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128202;</span>
                <h3>4. Visual Examples: Value vs Pointer</h3>
            </div>

            <h4>Example 1: Value Copy (NO Pointer) - Won't Modify</h4>
            <div class="visual-example-diagram">
                <svg viewBox="0 0 500 150" style="width: 100%; height: auto; margin: 12px 0;">
                    <!-- Main Function Box -->
                    <rect x="10" y="10" width="140" height="130" fill="#f0f4ff" stroke="#6b21a8" stroke-width="2" rx="6"/>
                    <text x="80" y="30" font-size="12" font-weight="600" text-anchor="middle" fill="#6b21a8">main()</text>
                    <rect x="20" y="40" width="120" height="35" fill="white" stroke="#d1d5db" stroke-width="1" rx="3"/>
                    <text x="80" y="55" font-size="11" font-weight="600" fill="#1f2937">num = 5</text>
                    <text x="80" y="68" font-size="9" fill="#57606a">Call addOne(5)</text>
                    <!-- Arrow -->
                    <path d="M 150 57 L 180 57" stroke="#2563eb" stroke-width="2" marker-end="url(#arrmain)"/>
                    <!-- Function Box -->
                    <rect x="180" y="10" width="140" height="130" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="6"/>
                    <text x="250" y="30" font-size="12" font-weight="600" text-anchor="middle" fill="#16a34a">addOne(x)</text>
                    <rect x="190" y="40" width="120" height="35" fill="white" stroke="#d1d5db" stroke-width="1" rx="3"/>
                    <text x="250" y="55" font-size="11" font-weight="600" fill="#1f2937">x = 5 (COPY)</text>
                    <text x="250" y="68" font-size="9" fill="#57606a">x++ → x = 6</text>
                    <!-- Result -->
                    <text x="80" y="100" font-size="10" fill="#57606a">Result: num still = 5</text>
                    <rect x="25" y="110" width="110" height="22" fill="#fef3c7" stroke="#d97706" stroke-width="1" rx="3"/>
                    <text x="80" y="125" font-size="10" font-weight="600" text-anchor="middle" fill="#1f2937">❌ NOT MODIFIED</text>
                    <defs>
                        <marker id="arrmain" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                            <path d="M 0 0 L 10 5 L 0 10" fill="#2563eb"/>
                        </marker>
                    </defs>
                </svg>
            </div>
            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

func addOne(x int) {
    x++  // Modifies copy only!
}

func main() {
    num := 5
    addOne(num)
    fmt.Println("num =", num)  // Output: 5 (unchanged!)
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>

            <h4>Example 2: Pointer for Mutation - WILL Modify</h4>
            <div class="visual-example-diagram">
                <svg viewBox="0 0 500 150" style="width: 100%; height: auto; margin: 12px 0;">
                    <!-- Main Function Box -->
                    <rect x="10" y="10" width="140" height="130" fill="#f0f4ff" stroke="#6b21a8" stroke-width="2" rx="6"/>
                    <text x="80" y="30" font-size="12" font-weight="600" text-anchor="middle" fill="#6b21a8">main()</text>
                    <rect x="20" y="40" width="120" height="40" fill="white" stroke="#d1d5db" stroke-width="1" rx="3"/>
                    <text x="80" y="55" font-size="11" font-weight="600" fill="#1f2937">num = 5</text>
                    <text x="80" y="72" font-size="9" fill="#57606a">addr: 0x12a45f8</text>
                    <!-- Arrow showing &num -->
                    <path d="M 150 60 L 180 60" stroke="#ea580c" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrptr)"/>
                    <text x="155" y="50" font-size="9" fill="#ea580c">&num</text>
                    <!-- Function with Pointer -->
                    <rect x="180" y="10" width="155" height="130" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="6"/>
                    <text x="257" y="30" font-size="12" font-weight="600" text-anchor="middle" fill="#2563eb">addOne(x *int)</text>
                    <rect x="190" y="40" width="135" height="45" fill="white" stroke="#d1d5db" stroke-width="1" rx="3"/>
                    <text x="257" y="55" font-size="11" font-weight="600" fill="#1f2937">x = 0x12a45f8</text>
                    <text x="257" y="68" font-size="9" fill="#57606a">(SAME ADDRESS!)</text>
                    <text x="257" y="80" font-size="9" fill="#ea580c">*x++ modifies num</text>
                    <!-- Result -->
                    <text x="80" y="100" font-size="10" fill="#57606a">Result: num NOW = 6</text>
                    <rect x="25" y="110" width="110" height="22" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="3"/>
                    <text x="80" y="125" font-size="10" font-weight="600" text-anchor="middle" fill="#16a34a">✓ MODIFIED!</text>
                    <defs>
                        <marker id="arrptr" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                            <path d="M 0 0 L 10 5 L 0 10" fill="#ea580c"/>
                        </marker>
                    </defs>
                </svg>
            </div>
            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

func addOne(x *int) {
    *x++  // Modifies original via pointer!
}

func main() {
    num := 5
    addOne(&num)  // Pass address
    fmt.Println("num =", num)  // Output: 6 (changed!)
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <!-- Struct Pointer Fields -->
        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128230;</span>
                <h3>5. Struct Fields: When to Use Pointer</h3>
            </div>

            <div class="pointer-table-container">
                <table class="pointer-decision-table">
                    <thead>
                        <tr>
                            <th>Field Type</th>
                            <th>Use Pointer?</th>
                            <th>Why</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>Age *int</code></td>
                            <td class="yes">✓ YES</td>
                            <td>Optional value (nil = not set, 0 = set to zero)</td>
                        </tr>
                        <tr>
                            <td><code>Email string</code></td>
                            <td class="no">✗ NO</td>
                            <td>Strings are small, use empty string for "not set"</td>
                        </tr>
                        <tr>
                            <td><code>Config *LargeStruct</code></td>
                            <td class="yes">✓ YES</td>
                            <td>Large structs are expensive to copy</td>
                        </tr>
                        <tr>
                            <td><code>Items []Item</code></td>
                            <td class="no">✗ NO</td>
                            <td>Slices already reference memory</td>
                        </tr>
                        <tr>
                            <td><code>Metadata map[string]string</code></td>
                            <td class="no">✗ NO</td>
                            <td>Maps already reference memory</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

type User struct {
    Name string   // Required
    Age  *int     // Optional - nil means "not provided"
}

func main() {
    // User without age
    user1 := User{Name: "Alice"}
    fmt.Printf("user1.Age is nil: %v\n", user1.Age == nil)

    // User with age
    age := 25
    user2 := User{Name: "Bob", Age: &age}

    if user2.Age != nil {
        fmt.Printf("Bob's age: %d\n", *user2.Age)
    }

    // Difference: nil vs zero
    zeroAge := 0
    user3 := User{Name: "Charlie", Age: &zeroAge}
    fmt.Printf("Charlie's age is zero: %d\n", *user3.Age)
    fmt.Println("But it's NOT nil - it was explicitly set!")
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <!-- DOs and DON'Ts -->
        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#9989;</span>
                <h3>6. DOs and DON'Ts (Best Practices)</h3>
            </div>

            <div class="dos-donts-grid">
                <div class="dos-column">
                    <h4>✓ Do These</h4>
                    <ul>
                        <li>Use pointers for mutation (modify original data)</li>
                        <li>Use pointers for large structs (>128 bytes typically)</li>
                        <li>Always check nil before dereferencing</li>
                        <li>Use pointers for optional fields in structs</li>
                        <li>Pass pointers to modify receiver in methods</li>
                        <li>Use pointers for tree/graph nodes</li>
                    </ul>
                </div>
                <div class="donts-column">
                    <h4>✗ Don't Do These</h4>
                    <ul>
                        <li>Don't use pointers for int, string, bool (too small)</li>
                        <li>Don't use pointers for slices/maps unnecessarily</li>
                        <li>Don't dereference nil pointers (panic!)</li>
                        <li>Don't use pointers just to "be more efficient"</li>
                        <li>Don't over-architect with pointers prematurely</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Mental Model -->
        <div class="topic-block highlight-block">
            <div class="block-header">
                <span class="block-icon">&#129504;</span>
                <h3>7. Mental Model (Remember This)</h3>
            </div>

            <div class="mental-model-grid">
                <div class="mental-model-item">
                    <div class="model-operator">&</div>
                    <div class="model-text">
                        <strong>Where is it?</strong>
                        <p>Gets the memory address of a variable. Use when you need to pass the location to a function.</p>
                    </div>
                </div>
                <div class="mental-model-item">
                    <div class="model-operator">*</div>
                    <div class="model-text">
                        <strong>What's inside?</strong>
                        <p>Dereferences a pointer to get the value it points to. Use to read/modify the actual value.</p>
                    </div>
                </div>
                <div class="mental-model-item">
                    <div class="model-operator">nil</div>
                    <div class="model-text">
                        <strong>Empty address</strong>
                        <p>A pointer that doesn't point to anything. Always check before dereference!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interview Traps -->
        <div class="topic-block">
            <div class="block-header warning-header">
                <span class="block-icon">&#9888;</span>
                <h3>8. Interview Traps & Common Mistakes</h3>
            </div>

            <div class="trap-card">
                <h4>Trap 1: Nil Dereference Panic</h4>
                <pre><code class="language-go">var p *int
*p = 10  // PANIC! p is nil</code></pre>
                <div class="trap-solution">
                    <strong>Fix:</strong> Always check nil: <code>if p != nil { *p = 10 }</code>
                </div>
            </div>

            <div class="trap-card">
                <h4>Trap 2: Pointer to Loop Variable</h4>
                <pre><code class="language-go">var ptrs []*int
for _, v := range []int{1, 2, 3} {
    ptrs = append(ptrs, &v)  // All point to same v!
}</code></pre>
                <div class="trap-solution">
                    <strong>Fix:</strong> Create a copy: <code>v := v; ptrs = append(ptrs, &v)</code>
                </div>
            </div>

            <div class="trap-card">
                <h4>Trap 3: Slice Append Won't Work Without Pointer</h4>
                <pre><code class="language-go">func add(s []int, v int) {
    s = append(s, v)  // Changes local copy only!
}</code></pre>
                <div class="trap-solution">
                    <strong>Fix:</strong> Return new slice: <code>func add(s []int, v int) []int { return append(s, v) }</code>
                </div>
            </div>

            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

func main() {
    // Trap 2 demonstration - Loop variable capture
    fmt.Println("=== Loop Variable Trap ===")

    // BAD - all point to same variable
    var badPtrs []*int
    nums := []int{1, 2, 3}
    for _, v := range nums {
        badPtrs = append(badPtrs, &v)
    }
    fmt.Print("Bad: ")
    for _, p := range badPtrs {
        fmt.Printf("%d ", *p)  // All print 3!
    }
    fmt.Println()

    // GOOD - create local copy
    var goodPtrs []*int
    for _, v := range nums {
        v := v  // Shadow variable
        goodPtrs = append(goodPtrs, &v)
    }
    fmt.Print("Good: ")
    for _, p := range goodPtrs {
        fmt.Printf("%d ", *p)  // Prints 1, 2, 3
    }
    fmt.Println()
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <!-- Quick Reference -->
        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128203;</span>
                <h3>Quick Reference Card</h3>
            </div>

            <div class="pointer-table-container">
                <table class="pointer-decision-table">
                    <thead>
                        <tr>
                            <th>Syntax</th>
                            <th>Meaning</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>&x</code></td>
                            <td>Address of x</td>
                            <td><code>p := &x</code></td>
                        </tr>
                        <tr>
                            <td><code>*p</code></td>
                            <td>Value at pointer p</td>
                            <td><code>v := *p</code></td>
                        </tr>
                        <tr>
                            <td><code>*int</code></td>
                            <td>Type: pointer to int</td>
                            <td><code>var p *int</code></td>
                        </tr>
                        <tr>
                            <td><code>*p = 10</code></td>
                            <td>Set value at p to 10</td>
                            <td><code>*p = 10</code></td>
                        </tr>
                        <tr>
                            <td><code>p == nil</code></td>
                            <td>Check if p is nil</td>
                            <td><code>if p == nil { ... }</code></td>
                        </tr>
                        <tr>
                            <td><code>p.Name</code></td>
                            <td>Shorthand for (*p).Name</td>
                            <td><code>p.Name = "Alice"</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Decision Tree -->
        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#127795;</span>
                <h3>Quick Decision Tree</h3>
            </div>

            <div class="decision-tree">
                <pre>Does the function need to modify the data?
  ├─ YES → Use * pointer receiver
  └─ NO → Use value receiver

Is the struct large (>128 bytes)?
  ├─ YES → Use * pointer
  └─ NO → Value is fine

Is it a slice, map, or channel?
  ├─ YES → NO pointer needed (already reference types)
  └─ NO → Check if optional

Should the field be optional (nil vs zero)?
  ├─ YES → Use * pointer
  └─ NO → Value is fine</pre>
            </div>
        </div>
    </section>

    <!-- BASIC SECTION -->
    <section id="basic" class="guide-section">
        <div class="section-header">
            <h2><span class="section-icon">&#9881;</span> Foundations for Go API Development</h2>
            <p class="section-description">Core concepts for building robust APIs</p>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128204;</span>
                <h3>Understanding Pointers in Go</h3>
            </div>
            <p>Pointers are fundamental in Go. A pointer holds the memory address of a value. Understanding pointers is crucial for API development because they affect how data is passed, modified, and shared.</p>

            <div class="diagram-container">
                <div class="diagram-title">Pointer vs Value in Memory</div>
                <div class="mermaid">
flowchart LR
    subgraph "Pass by Value"
        A[x = 42] -->|copy| B[func receives copy]
        B -->|modify| C[copy = 100]
        A -->|unchanged| D[x still 42]
    end

    subgraph "Pass by Pointer"
        E[x = 42] -->|address| F["func receives &x"]
        F -->|modify *ptr| G[x = 100]
    end
                </div>
            </div>

            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

func main() {
    // Regular variable
    x := 42

    // Pointer to x (stores the memory address of x)
    ptr := &x

    fmt.Println("Value of x:", x)           // 42
    fmt.Println("Address of x:", &x)        // 0x... (memory address)
    fmt.Println("Pointer ptr holds:", ptr)  // Same address as &x
    fmt.Println("Value at ptr:", *ptr)      // 42 (dereferencing)

    // Modifying through pointer changes original
    *ptr = 100
    fmt.Println("x after modification:", x) // 100
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>

            <h4>Why Use Pointers in APIs?</h4>
            <div class="feature-list">
                <div class="feature-item">
                    <span class="feature-icon">&#128640;</span>
                    <div>
                        <strong>Efficiency</strong>
                        <p>Pass large structs by reference instead of copying</p>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">&#9999;</span>
                    <div>
                        <strong>Mutability</strong>
                        <p>Allow functions to modify caller's data</p>
                    </div>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">&#10067;</span>
                    <div>
                        <strong>Optional Values</strong>
                        <p>nil pointers represent "no value"</p>
                    </div>
                </div>
            </div>

            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

// User represents an API resource
type User struct {
    ID    int
    Name  string
    Email string
}

// Pass by value - cannot modify original
func updateNameByValue(u User, name string) {
    u.Name = name // Only modifies the copy
}

// Pass by pointer - can modify original
func updateNameByPointer(u *User, name string) {
    u.Name = name // Modifies the original
}

// Using pointer for optional fields (nil = not provided)
type UpdateRequest struct {
    Name  *string // nil means "don't update"
    Email *string
}

func main() {
    user := User{ID: 1, Name: "Alice", Email: "alice@example.com"}

    // By value - no change
    updateNameByValue(user, "Bob")
    fmt.Println("After value update:", user.Name) // Still "Alice"

    // By pointer - changes original
    updateNameByPointer(&user, "Bob")
    fmt.Println("After pointer update:", user.Name) // Now "Bob"

    // Optional field example
    newName := "Charlie"
    req := UpdateRequest{Name: &newName, Email: nil}

    if req.Name != nil {
        fmt.Println("Update name to:", *req.Name)
    }
    if req.Email == nil {
        fmt.Println("Email not provided, keep existing")
    }
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128230;</span>
                <h3>Structs and Methods</h3>
            </div>
            <p>Structs are Go's way to define custom types. Methods allow you to attach behavior to structs - essential for building clean API handlers and services.</p>

            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "encoding/json"
    "fmt"
)

type User struct {
    ID    int    `json:"id"`
    Name  string `json:"name"`
    Email string `json:"email"`
    Age   int    `json:"age"`
}

// Value receiver - cannot modify the struct
func (u User) FullInfo() string {
    return fmt.Sprintf("User %d: %s (%s)", u.ID, u.Name, u.Email)
}

// Pointer receiver - can modify the struct
func (u *User) SetEmail(email string) {
    u.Email = email
}

// Pointer receiver - for large structs or consistency
func (u *User) ToJSON() ([]byte, error) {
    return json.Marshal(u)
}

// Validation method
func (u *User) Validate() error {
    if u.Name == "" {
        return fmt.Errorf("name is required")
    }
    if u.Email == "" {
        return fmt.Errorf("email is required")
    }
    if u.Age < 0 {
        return fmt.Errorf("age cannot be negative")
    }
    return nil
}

func main() {
    user := User{ID: 1, Name: "Alice", Email: "alice@example.com", Age: 25}

    // Value receiver method
    fmt.Println(user.FullInfo())

    // Pointer receiver method - modifies the struct
    user.SetEmail("newalice@example.com")
    fmt.Println("After SetEmail:", user.Email)

    // ToJSON
    jsonData, _ := user.ToJSON()
    fmt.Println("JSON:", string(jsonData))

    // Validation
    if err := user.Validate(); err != nil {
        fmt.Println("Validation error:", err)
    } else {
        fmt.Println("User is valid")
    }

    // Invalid user
    invalidUser := User{ID: 2, Age: -5}
    if err := invalidUser.Validate(); err != nil {
        fmt.Println("Validation error:", err)
    }
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128268;</span>
                <h3>Interfaces for API Design</h3>
            </div>
            <p>Interfaces define behavior contracts. They enable loose coupling and are essential for testable API code.</p>

            <div class="info-box">
                <div class="info-header">
                    <span class="info-icon">&#128161;</span>
                    <span>Key Insight</span>
                </div>
                <p><strong>Go interfaces are implicit!</strong> A type implements an interface simply by implementing its methods - no explicit declaration needed. This makes Go's interfaces very flexible.</p>
            </div>

            <div class="code-example">
                <pre><code class="language-go">package main

import "fmt"

// Interface defines the contract
type Repository interface {
    FindByID(id int) (interface{}, error)
    Save(entity interface{}) error
}

// Mock implementation for testing
type MockUserRepository struct {
    users map[int]string
}

func NewMockUserRepository() *MockUserRepository {
    return &MockUserRepository{
        users: map[int]string{
            1: "Alice",
            2: "Bob",
        },
    }
}

func (r *MockUserRepository) FindByID(id int) (interface{}, error) {
    if name, ok := r.users[id]; ok {
        return name, nil
    }
    return nil, fmt.Errorf("user not found")
}

func (r *MockUserRepository) Save(entity interface{}) error {
    fmt.Printf("Saved: %v\n", entity)
    return nil
}

// Service depends on interface, not concrete type
type UserService struct {
    repo Repository
}

func NewUserService(repo Repository) *UserService {
    return &UserService{repo: repo}
}

func (s *UserService) GetUser(id int) (interface{}, error) {
    return s.repo.FindByID(id)
}

func main() {
    // Inject mock repository
    repo := NewMockUserRepository()
    service := NewUserService(repo)

    user, err := service.GetUser(1)
    if err != nil {
        fmt.Println("Error:", err)
        return
    }
    fmt.Println("Found user:", user)

    _, err = service.GetUser(99)
    if err != nil {
        fmt.Println("Error:", err)
    }
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#9888;</span>
                <h3>Error Handling in Go</h3>
            </div>
            <p>Go uses explicit error handling. Functions return errors as values - no exceptions.</p>

            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "errors"
    "fmt"
)

// Custom error types
var (
    ErrNotFound     = errors.New("resource not found")
    ErrUnauthorized = errors.New("unauthorized access")
    ErrValidation   = errors.New("validation failed")
)

// Wrapping errors with context
type User struct {
    ID    int
    Name  string
    Email string
}

func findUser(id int) (*User, error) {
    // Simulate database lookup
    if id <= 0 {
        return nil, fmt.Errorf("findUser: invalid id %d: %w", id, ErrValidation)
    }
    if id == 99 {
        return nil, fmt.Errorf("findUser id=%d: %w", id, ErrNotFound)
    }
    return &User{ID: id, Name: "Alice", Email: "alice@example.com"}, nil
}

func main() {
    // Success case
    user, err := findUser(1)
    if err != nil {
        fmt.Println("Error:", err)
    } else {
        fmt.Printf("Found: %+v\n", user)
    }

    // Error case - check specific error type
    _, err = findUser(99)
    if err != nil {
        // Using errors.Is to check wrapped errors
        if errors.Is(err, ErrNotFound) {
            fmt.Println("User not found - return 404")
        } else if errors.Is(err, ErrValidation) {
            fmt.Println("Validation error - return 400")
        } else {
            fmt.Println("Unknown error:", err)
        }
    }

    // Validation error
    _, err = findUser(-1)
    if errors.Is(err, ErrValidation) {
        fmt.Println("Bad request:", err)
    }
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>
    </section>

    <!-- INTERMEDIATE SECTION -->
    <section id="intermediate" class="guide-section">
        <div class="section-header">
            <h2><span class="section-icon">&#128295;</span> Intermediate - Concurrency and Patterns</h2>
            <p class="section-description">Master Go's powerful concurrency model</p>
        </div>

        <div class="topic-block highlight-block">
            <div class="block-header">
                <span class="block-icon">&#128101;</span>
                <h3>Goroutines - Concurrent Execution</h3>
            </div>
            <p>Goroutines are lightweight, user-space threads managed by the Go runtime scheduler. They are Go's fundamental concurrency primitive.</p>

            <div class="diagram-container">
                <div class="diagram-title">Go's M:N Scheduling Model</div>
                <div class="mermaid">
flowchart TB
    subgraph "Goroutines (G)"
        G1[G1]
        G2[G2]
        G3[G3]
        G4[G4]
        G5[G5]
    end

    subgraph "Processors (P)"
        P1[P1 Local Queue]
        P2[P2 Local Queue]
    end

    subgraph "OS Threads (M)"
        M1[Thread 1]
        M2[Thread 2]
    end

    G1 --> P1
    G2 --> P1
    G3 --> P2
    G4 --> P2
    G5 --> P1

    P1 --> M1
    P2 --> M2

    M1 --> CPU1[CPU Core]
    M2 --> CPU2[CPU Core]
                </div>
            </div>

            <div class="comparison-table">
                <div class="comparison-header">
                    <div class="comparison-title">Goroutines vs OS Threads</div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Aspect</th>
                            <th>OS Threads</th>
                            <th>Goroutines</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Stack Size</td>
                            <td>~1-8MB fixed</td>
                            <td>~2KB (grows dynamically)</td>
                        </tr>
                        <tr>
                            <td>Creation Time</td>
                            <td>~10,000 CPU cycles</td>
                            <td>~300 CPU cycles</td>
                        </tr>
                        <tr>
                            <td>Context Switch</td>
                            <td>Kernel mode (slow)</td>
                            <td>User mode (fast)</td>
                        </tr>
                        <tr>
                            <td>Scalability</td>
                            <td>Thousands</td>
                            <td>Millions</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "fmt"
    "sync"
    "time"
)

func fetchUser(id int, wg *sync.WaitGroup) {
    defer wg.Done() // Signal completion when function returns

    // Simulate API call
    time.Sleep(10 * time.Millisecond)
    fmt.Printf("Fetched user %d\n", id)
}

func main() {
    var wg sync.WaitGroup

    userIDs := []int{1, 2, 3, 4, 5}

    start := time.Now()

    // Launch goroutines for concurrent fetching
    for _, id := range userIDs {
        wg.Add(1)
        go fetchUser(id, &wg)
    }

    // Wait for all goroutines to complete
    wg.Wait()

    fmt.Printf("Fetched %d users in %v\n", len(userIDs), time.Since(start))
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128232;</span>
                <h3>Channels - Goroutine Communication</h3>
            </div>
            <p>Channels are Go's way to communicate between goroutines safely. "Don't communicate by sharing memory; share memory by communicating."</p>

            <div class="diagram-container">
                <div class="diagram-title">Channel Communication</div>
                <div class="mermaid">
sequenceDiagram
    participant G1 as Goroutine 1
    participant CH as Channel
    participant G2 as Goroutine 2

    G1->>CH: Send data
    Note over CH: Buffered or<br/>blocks until received
    CH->>G2: Receive data
    G2->>G2: Process data
                </div>
            </div>

            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "fmt"
    "time"
)

type Result struct {
    UserID int
    Data   string
    Error  error
}

func fetchUserData(id int, results chan<- Result) {
    // Simulate API call
    time.Sleep(5 * time.Millisecond)

    // Send result through channel
    results <- Result{
        UserID: id,
        Data:   fmt.Sprintf("User %d data", id),
        Error:  nil,
    }
}

func main() {
    userIDs := []int{1, 2, 3, 4, 5}

    // Buffered channel - won't block until buffer is full
    results := make(chan Result, len(userIDs))

    // Launch goroutines
    for _, id := range userIDs {
        go fetchUserData(id, results)
    }

    // Collect results
    for i := 0; i < len(userIDs); i++ {
        result := <-results // Receive from channel
        if result.Error != nil {
            fmt.Printf("Error for user %d: %v\n", result.UserID, result.Error)
        } else {
            fmt.Printf("Got: %s\n", result.Data)
        }
    }

    close(results) // Close channel when done
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128260;</span>
                <h3>Select Statement - Handling Multiple Channels</h3>
            </div>
            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "fmt"
    "time"
)

func main() {
    ch1 := make(chan string)
    ch2 := make(chan string)

    go func() {
        time.Sleep(10 * time.Millisecond)
        ch1 <- "Result from service 1"
    }()

    go func() {
        time.Sleep(5 * time.Millisecond)
        ch2 <- "Result from service 2"
    }()

    // Receive from whichever channel is ready first
    for i := 0; i < 2; i++ {
        select {
        case msg1 := <-ch1:
            fmt.Println("Received:", msg1)
        case msg2 := <-ch2:
            fmt.Println("Received:", msg2)
        }
    }

    // Select with timeout
    timeout := make(chan string)
    go func() {
        time.Sleep(20 * time.Millisecond)
        timeout <- "slow result"
    }()

    select {
    case result := <-timeout:
        fmt.Println("Got:", result)
    case <-time.After(10 * time.Millisecond):
        fmt.Println("Timeout! Service too slow")
    }
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header warning-header">
                <span class="block-icon">&#9888;</span>
                <h3>Common Concurrency Mistakes</h3>
            </div>

            <h4>Mistake 1: Goroutine Leak</h4>
            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "context"
    "fmt"
    "time"
)

// GOOD: Use context for cancellation
func safeGoroutine(ctx context.Context) chan int {
    ch := make(chan int, 1) // Buffered - won't block

    go func() {
        select {
        case ch <- 42:
            fmt.Println("Sent successfully")
        case <-ctx.Done():
            fmt.Println("Context cancelled, cleaning up")
            return
        }
    }()

    return ch
}

func main() {
    // Using context with timeout to prevent leaks
    ctx, cancel := context.WithTimeout(context.Background(), 100*time.Millisecond)
    defer cancel()

    ch := safeGoroutine(ctx)

    select {
    case result := <-ch:
        fmt.Println("Got result:", result)
    case <-ctx.Done():
        fmt.Println("Timed out")
    }
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>

            <h4>Mistake 2: Race Conditions</h4>
            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "fmt"
    "sync"
    "sync/atomic"
)

func main() {
    var wg sync.WaitGroup

    // GOOD: Using atomic operations
    var atomicCounter int64
    for i := 0; i < 1000; i++ {
        wg.Add(1)
        go func() {
            defer wg.Done()
            atomic.AddInt64(&atomicCounter, 1)
        }()
    }
    wg.Wait()
    fmt.Println("Atomic counter:", atomicCounter)

    // GOOD: Using mutex
    var mutexCounter int
    var mu sync.Mutex
    for i := 0; i < 1000; i++ {
        wg.Add(1)
        go func() {
            defer wg.Done()
            mu.Lock()
            mutexCounter++
            mu.Unlock()
        }()
    }
    wg.Wait()
    fmt.Println("Mutex counter:", mutexCounter)
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>

            <h4>Mistake 3: Loop Variable Capture</h4>
            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "fmt"
    "sync"
)

func main() {
    var wg sync.WaitGroup

    fmt.Println("GOOD - Pass as parameter:")
    for i := 1; i <= 3; i++ {
        wg.Add(1)
        go func(n int) {
            defer wg.Done()
            // n is a copy - prints 1,2,3 (order may vary)
            fmt.Printf("  Got: %d\n", n)
        }(i)
    }
    wg.Wait()
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128268;</span>
                <h3>Context for Request Handling</h3>
            </div>
            <p>Context carries deadlines, cancellation signals, and request-scoped values across API boundaries.</p>

            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "context"
    "fmt"
    "time"
)

func fetchFromDB(ctx context.Context, query string) (string, error) {
    // Create a channel for the result
    resultCh := make(chan string, 1)

    go func() {
        // Simulate slow database query
        time.Sleep(20 * time.Millisecond)
        resultCh <- "DB Result: " + query
    }()

    // Wait for result or context cancellation
    select {
    case result := <-resultCh:
        return result, nil
    case <-ctx.Done():
        return "", ctx.Err()
    }
}

func handleRequest(ctx context.Context) {
    // Add timeout to context
    ctx, cancel := context.WithTimeout(ctx, 100*time.Millisecond)
    defer cancel()

    result, err := fetchFromDB(ctx, "SELECT * FROM users")
    if err != nil {
        if err == context.DeadlineExceeded {
            fmt.Println("Request timed out")
        } else if err == context.Canceled {
            fmt.Println("Request was cancelled")
        } else {
            fmt.Println("Error:", err)
        }
        return
    }

    fmt.Println("Got:", result)
}

func main() {
    ctx := context.Background()

    fmt.Println("Request with 100ms timeout (DB takes 20ms - will succeed):")
    handleRequest(ctx)
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128230;</span>
                <h3>JSON Handling for APIs</h3>
            </div>
            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "encoding/json"
    "fmt"
)

type User struct {
    ID        int    `json:"id"`
    Name      string `json:"name"`
    Email     string `json:"email,omitempty"`    // Omit if empty
    Password  string `json:"-"`                   // Never include in JSON
    IsAdmin   bool   `json:"is_admin"`
}

type APIResponse struct {
    Success bool        `json:"success"`
    Data    interface{} `json:"data,omitempty"`
    Error   string      `json:"error,omitempty"`
}

func main() {
    // Struct to JSON
    user := User{
        ID:       1,
        Name:     "Alice",
        Email:    "alice@example.com",
        Password: "secret123", // Won't appear in JSON
        IsAdmin:  false,
    }

    jsonData, _ := json.MarshalIndent(user, "", "  ")
    fmt.Println("User JSON:")
    fmt.Println(string(jsonData))

    // API Response
    response := APIResponse{
        Success: true,
        Data:    user,
    }

    jsonResp, _ := json.MarshalIndent(response, "", "  ")
    fmt.Println("\nAPI Response:")
    fmt.Println(string(jsonResp))

    // JSON to Struct
    input := []byte(`{"id": 2, "name": "Bob", "is_admin": true}`)
    var newUser User
    json.Unmarshal(input, &newUser)
    fmt.Printf("\nParsed User: %+v\n", newUser)
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>
    </section>

    <!-- ADVANCED SECTION -->
    <section id="advanced" class="guide-section">
        <div class="section-header">
            <h2><span class="section-icon">&#128640;</span> Advanced - Production Patterns</h2>
            <p class="section-description">Battle-tested patterns for high-performance APIs</p>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128101;</span>
                <h3>Worker Pool Pattern</h3>
            </div>
            <p>Process multiple tasks concurrently with a fixed number of workers - essential for rate limiting and resource management.</p>

            <div class="diagram-container">
                <div class="diagram-title">Worker Pool Architecture</div>
                <div class="mermaid">
flowchart LR
    J[Jobs Channel] --> W1[Worker 1]
    J --> W2[Worker 2]
    J --> W3[Worker 3]
    W1 --> R[Results Channel]
    W2 --> R
    W3 --> R
    R --> C[Collector]
                </div>
            </div>

            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "fmt"
    "sync"
    "time"
)

type Job struct {
    ID      int
    Payload string
}

type Result struct {
    JobID   int
    Output  string
    Error   error
}

func worker(id int, jobs <-chan Job, results chan<- Result, wg *sync.WaitGroup) {
    defer wg.Done()

    for job := range jobs {
        // Simulate processing
        time.Sleep(5 * time.Millisecond)

        results <- Result{
            JobID:  job.ID,
            Output: fmt.Sprintf("Worker %d processed job %d: %s", id, job.ID, job.Payload),
            Error:  nil,
        }
    }
}

func main() {
    numWorkers := 3
    numJobs := 10

    jobs := make(chan Job, numJobs)
    results := make(chan Result, numJobs)

    var wg sync.WaitGroup

    // Start workers
    fmt.Printf("Starting %d workers...\n", numWorkers)
    for w := 1; w <= numWorkers; w++ {
        wg.Add(1)
        go worker(w, jobs, results, &wg)
    }

    // Send jobs
    start := time.Now()
    for j := 1; j <= numJobs; j++ {
        jobs <- Job{ID: j, Payload: fmt.Sprintf("Task %d data", j)}
    }
    close(jobs)

    // Wait for workers in separate goroutine
    go func() {
        wg.Wait()
        close(results)
    }()

    // Collect results
    for result := range results {
        fmt.Println(result.Output)
    }

    fmt.Printf("\nProcessed %d jobs in %v\n", numJobs, time.Since(start))
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128295;</span>
                <h3>Rate Limiter Implementation</h3>
            </div>
            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "fmt"
    "sync"
    "time"
)

type RateLimiter struct {
    tokens   chan struct{}
    interval time.Duration
    stop     chan struct{}
}

func NewRateLimiter(ratePerSecond int) *RateLimiter {
    rl := &RateLimiter{
        tokens:   make(chan struct{}, ratePerSecond),
        interval: time.Second / time.Duration(ratePerSecond),
        stop:     make(chan struct{}),
    }

    // Fill initial tokens
    for i := 0; i < ratePerSecond; i++ {
        rl.tokens <- struct{}{}
    }

    // Refill tokens periodically
    go func() {
        ticker := time.NewTicker(rl.interval)
        defer ticker.Stop()

        for {
            select {
            case <-ticker.C:
                select {
                case rl.tokens <- struct{}{}:
                default: // Bucket full
                }
            case <-rl.stop:
                return
            }
        }
    }()

    return rl
}

func (rl *RateLimiter) Wait() {
    <-rl.tokens
}

func (rl *RateLimiter) Stop() {
    close(rl.stop)
}

func main() {
    // Allow 5 requests per second
    limiter := NewRateLimiter(5)
    defer limiter.Stop()

    var wg sync.WaitGroup
    start := time.Now()

    // Try to make 10 requests quickly
    for i := 1; i <= 10; i++ {
        wg.Add(1)
        go func(reqID int) {
            defer wg.Done()

            limiter.Wait() // Block until allowed
            elapsed := time.Since(start)
            fmt.Printf("Request %d processed at %v\n", reqID, elapsed.Round(time.Millisecond))
        }(i)
    }

    wg.Wait()
    fmt.Printf("\nAll requests completed in %v\n", time.Since(start).Round(time.Millisecond))
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#9889;</span>
                <h3>Circuit Breaker Pattern</h3>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">Circuit Breaker State Machine</div>
                <div class="mermaid">
stateDiagram-v2
    [*] --> Closed
    Closed --> Open : Failures >= Threshold
    Open --> HalfOpen : Timeout Elapsed
    HalfOpen --> Closed : Success
    HalfOpen --> Open : Failure
                </div>
            </div>

            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "errors"
    "fmt"
    "sync"
    "time"
)

type State int

const (
    StateClosed State = iota
    StateOpen
    StateHalfOpen
)

type CircuitBreaker struct {
    mu            sync.Mutex
    state         State
    failures      int
    threshold     int
    resetTimeout  time.Duration
    lastFailure   time.Time
}

func NewCircuitBreaker(threshold int, resetTimeout time.Duration) *CircuitBreaker {
    return &CircuitBreaker{
        state:        StateClosed,
        threshold:    threshold,
        resetTimeout: resetTimeout,
    }
}

func (cb *CircuitBreaker) Execute(fn func() error) error {
    cb.mu.Lock()

    if cb.state == StateOpen {
        if time.Since(cb.lastFailure) > cb.resetTimeout {
            cb.state = StateHalfOpen
            cb.failures = 0
            fmt.Println("Circuit: Open -> HalfOpen")
        } else {
            cb.mu.Unlock()
            return errors.New("circuit breaker is open")
        }
    }
    cb.mu.Unlock()

    err := fn()

    cb.mu.Lock()
    defer cb.mu.Unlock()

    if err != nil {
        cb.failures++
        cb.lastFailure = time.Now()

        if cb.failures >= cb.threshold {
            cb.state = StateOpen
            fmt.Printf("Circuit: -> Open (failures: %d)\n", cb.failures)
        }
        return err
    }

    if cb.state == StateHalfOpen {
        cb.state = StateClosed
        fmt.Println("Circuit: HalfOpen -> Closed")
    }
    cb.failures = 0
    return nil
}

func main() {
    cb := NewCircuitBreaker(3, 50*time.Millisecond)

    callCount := 0
    callService := func() error {
        callCount++
        if callCount <= 4 {
            return errors.New("service unavailable")
        }
        return nil
    }

    // Make 10 calls
    for i := 1; i <= 10; i++ {
        err := cb.Execute(callService)
        if err != nil {
            fmt.Printf("Call %d: Failed - %v\n", i, err)
        } else {
            fmt.Printf("Call %d: Success\n", i)
        }
        time.Sleep(5 * time.Millisecond)
    }

    // Wait for reset
    fmt.Println("\nWaiting for circuit to reset...")
    time.Sleep(60 * time.Millisecond)

    callCount = 5
    err := cb.Execute(callService)
    if err != nil {
        fmt.Printf("After reset: Failed - %v\n", err)
    } else {
        fmt.Println("After reset: Success")
    }
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128721;</span>
                <h3>Graceful Shutdown</h3>
            </div>
            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "context"
    "fmt"
    "sync"
    "time"
)

type Server struct {
    wg      sync.WaitGroup
    running bool
    mu      sync.Mutex
}

func (s *Server) HandleRequest(ctx context.Context, reqID int) {
    s.mu.Lock()
    if !s.running {
        s.mu.Unlock()
        fmt.Printf("Request %d rejected: server shutting down\n", reqID)
        return
    }
    s.wg.Add(1)
    s.mu.Unlock()

    defer s.wg.Done()

    fmt.Printf("Request %d: Started\n", reqID)

    select {
    case <-time.After(50 * time.Millisecond):
        fmt.Printf("Request %d: Completed\n", reqID)
    case <-ctx.Done():
        fmt.Printf("Request %d: Cancelled\n", reqID)
    }
}

func (s *Server) Start() {
    s.mu.Lock()
    s.running = true
    s.mu.Unlock()
    fmt.Println("Server started")
}

func (s *Server) Shutdown(timeout time.Duration) {
    fmt.Println("Initiating graceful shutdown...")

    s.mu.Lock()
    s.running = false
    s.mu.Unlock()

    done := make(chan struct{})
    go func() {
        s.wg.Wait()
        close(done)
    }()

    select {
    case <-done:
        fmt.Println("All requests completed, shutdown successful")
    case <-time.After(timeout):
        fmt.Println("Shutdown timeout, some requests may be incomplete")
    }
}

func main() {
    server := &Server{}
    server.Start()

    ctx := context.Background()

    // Simulate incoming requests
    for i := 1; i <= 3; i++ {
        go server.HandleRequest(ctx, i)
        time.Sleep(5 * time.Millisecond)
    }

    time.Sleep(10 * time.Millisecond)
    server.Shutdown(500 * time.Millisecond)
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128230;</span>
                <h3>Concurrent Map with sync.Map</h3>
            </div>
            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "fmt"
    "sync"
)

type Cache struct {
    data sync.Map
}

func (c *Cache) Set(key string, value interface{}) {
    c.data.Store(key, value)
}

func (c *Cache) Get(key string) (interface{}, bool) {
    return c.data.Load(key)
}

func (c *Cache) GetOrSet(key string, defaultValue interface{}) interface{} {
    actual, _ := c.data.LoadOrStore(key, defaultValue)
    return actual
}

func main() {
    cache := &Cache{}
    var wg sync.WaitGroup

    // Concurrent writes
    for i := 0; i < 10; i++ {
        wg.Add(1)
        go func(id int) {
            defer wg.Done()
            key := fmt.Sprintf("user:%d", id)
            cache.Set(key, fmt.Sprintf("User %d data", id))
        }(i)
    }

    wg.Wait()

    // Read values
    if value, ok := cache.Get("user:5"); ok {
        fmt.Println("Found:", value)
    }

    // GetOrSet - atomic check and set
    result := cache.GetOrSet("user:100", "New User 100")
    fmt.Println("GetOrSet result:", result)

    // Second call returns existing value
    result2 := cache.GetOrSet("user:100", "Different Value")
    fmt.Println("Second GetOrSet:", result2)

    // Iterate all entries
    fmt.Println("\nAll cache entries:")
    cache.data.Range(func(key, value interface{}) bool {
        fmt.Printf("  %s: %s\n", key, value)
        return true
    })
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>

        <div class="topic-block">
            <div class="block-header">
                <span class="block-icon">&#128260;</span>
                <h3>Fan-Out/Fan-In Pattern</h3>
            </div>
            <div class="code-example">
                <pre><code class="language-go">package main

import (
    "fmt"
    "sync"
    "time"
)

func producer(nums ...int) <-chan int {
    out := make(chan int)
    go func() {
        for _, n := range nums {
            out <- n
        }
        close(out)
    }()
    return out
}

func square(in <-chan int) <-chan int {
    out := make(chan int)
    go func() {
        for n := range in {
            time.Sleep(5 * time.Millisecond)
            out <- n * n
        }
        close(out)
    }()
    return out
}

func merge(channels ...<-chan int) <-chan int {
    var wg sync.WaitGroup
    out := make(chan int)

    output := func(c <-chan int) {
        defer wg.Done()
        for n := range c {
            out <- n
        }
    }

    wg.Add(len(channels))
    for _, c := range channels {
        go output(c)
    }

    go func() {
        wg.Wait()
        close(out)
    }()

    return out
}

func main() {
    start := time.Now()

    // Create input
    in := producer(1, 2, 3, 4, 5, 6, 7, 8)

    // Fan-out to 3 workers
    c1 := square(in)
    c2 := square(in)
    c3 := square(in)

    // Fan-in results
    results := merge(c1, c2, c3)

    // Collect results
    var sum int
    count := 0
    for n := range results {
        fmt.Printf("Got: %d\n", n)
        sum += n
        count++
    }

    fmt.Printf("\nProcessed %d items, sum: %d\n", count, sum)
    fmt.Printf("Time: %v\n", time.Since(start).Round(time.Millisecond))
}</code></pre>
                <button class="run-code-btn" data-language="go">Run Code</button>
            </div>
        </div>
    </section>

        </main><!-- END guide-content -->
    </div><!-- END guide-layout -->
</div><!-- END guide-page -->

<style>
/* ============================================
   SIDEBAR LAYOUT STYLES
   ============================================ */
.guide-layout {
    display: flex;
    gap: 2rem;
    margin-top: 1.5rem;
}

.guide-sidebar {
    position: sticky;
    top: 1rem;
    width: 220px;
    min-width: 220px;
    max-height: calc(100vh - 2rem);
    overflow-y: auto;
    background: var(--color-bg-primary, #ffffff);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.75rem;
    padding: 1rem;
    align-self: flex-start;
}

.sidebar-header {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--color-text-secondary, #64748b);
    padding-bottom: 0.75rem;
    margin-bottom: 0.75rem;
    border-bottom: 1px solid var(--color-border, #e2e8f0);
}

.sidebar-section {
    margin-bottom: 1rem;
}

.sidebar-section-title {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    color: #00ADD8;
    margin-bottom: 0.5rem;
    padding: 0.25rem 0;
}

.sidebar-link {
    display: block;
    font-size: 0.8rem;
    color: var(--color-text-secondary, #64748b);
    text-decoration: none;
    padding: 0.35rem 0.5rem;
    border-radius: 0.375rem;
    margin-bottom: 0.15rem;
    transition: all 0.15s ease;
}

.sidebar-link:hover {
    background: #00ADD810;
    color: #00ADD8;
}

.sidebar-link.active {
    background: #00ADD8;
    color: white;
    font-weight: 500;
}

.guide-content {
    flex: 1;
    min-width: 0;
}

/* Hide roadmap section in sidebar layout */
.guide-layout .roadmap-section {
    margin-bottom: 2rem;
}

@media (max-width: 900px) {
    .guide-layout {
        flex-direction: column;
    }

    .guide-sidebar {
        position: static;
        width: 100%;
        max-height: none;
        overflow-y: visible;
    }

    .sidebar-section {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }

    .sidebar-section-title {
        width: 100%;
    }

    .sidebar-link {
        flex: 0 0 auto;
        margin-bottom: 0;
    }
}

/* ============================================
   FIX INFINITE SCROLL - CRITICAL
   ============================================ */
.guide-page {
    max-width: 1300px;
    margin: 0 auto;
    padding: 2rem;
    overflow-x: hidden;
}

html, body {
    overflow-x: hidden;
    max-width: 100vw;
}

/* ============================================
   ROADMAP SECTION STYLES
   ============================================ */
.roadmap-section {
    margin-bottom: 2.5rem;
    padding: 1.5rem;
    background: var(--color-bg-secondary, #f8fafc);
    border-radius: 1rem;
    border: 1px solid var(--color-border, #e2e8f0);
    overflow: hidden;
}

.roadmap-title {
    font-size: 1.5rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 0.5rem;
    color: var(--color-text-primary, #0f172a);
}

.roadmap-subtitle {
    text-align: center;
    color: var(--color-text-secondary, #64748b);
    margin-bottom: 1.5rem;
    font-size: 0.95rem;
}

.roadmap-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
}

@media (max-width: 1024px) {
    .roadmap-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 600px) {
    .roadmap-grid {
        grid-template-columns: 1fr;
    }
    .roadmap-section {
        padding: 1rem;
    }
}

.roadmap-column {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.column-title {
    font-size: 0.85rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 0.5rem 0.75rem;
    border-radius: 0.5rem;
    margin-bottom: 0.25rem;
}

.column-title.fundamentals {
    background: #dbeafe;
    color: #1e40af;
    border-left: 4px solid #2563eb;
}

.column-title.compiler {
    background: #fef3c7;
    color: #92400e;
    border-left: 4px solid #d97706;
}

.column-title.concurrency {
    background: #dcfce7;
    color: #166534;
    border-left: 4px solid #16a34a;
}

.column-title.production {
    background: #fce7f3;
    color: #9d174d;
    border-left: 4px solid #db2777;
}

.roadmap-card {
    background: var(--color-bg-primary, #ffffff);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.5rem;
    padding: 0.875rem;
    transition: all 0.2s ease;
    position: relative;
}

.roadmap-card:hover {
    border-color: #00ADD8;
    box-shadow: 0 4px 12px rgba(0, 173, 216, 0.15);
}

.roadmap-card.highlight-card {
    border-color: #00ADD8;
    background: linear-gradient(135deg, #00ADD808 0%, #ffffff 100%);
}

/* Card title link - clickable to scroll to section */
.card-title-link {
    text-decoration: none;
    display: block;
}

.card-title-link:hover h4 {
    color: #00ADD8;
}

.roadmap-card h4 {
    font-size: 0.9rem;
    font-weight: 600;
    margin: 0 0 0.5rem 0;
    color: var(--color-text-primary, #0f172a);
    transition: color 0.2s;
}

.roadmap-card ul {
    margin: 0 0 0.5rem 0;
    padding-left: 1.25rem;
    font-size: 0.8rem;
    color: var(--color-text-secondary, #64748b);
}

.roadmap-card li {
    margin-bottom: 0.15rem;
}

/* Card actions - contains docs link and copy prompt */
.card-actions {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    margin-top: 0.5rem;
}

.docs-link {
    display: inline-flex;
    align-items: center;
    padding: 0.35rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 500;
    color: #00ADD8;
    background: #00ADD810;
    border: 1px solid #00ADD830;
    border-radius: 0.375rem;
    text-decoration: none;
    transition: all 0.2s;
    white-space: nowrap;
}

.docs-link:hover {
    background: #00ADD8;
    color: white;
    border-color: #00ADD8;
}

.card-link {
    display: inline-block;
    font-size: 0.75rem;
    color: #00ADD8;
    text-decoration: none;
    margin-bottom: 0.5rem;
}

.card-link:hover {
    text-decoration: underline;
}

.copy-prompt-btn {
    flex: 1;
    padding: 0.35rem 0.75rem;
    background: var(--color-bg-tertiary, #f1f5f9);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.375rem;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-text-secondary, #64748b);
    cursor: pointer;
    transition: all 0.2s;
}

.copy-prompt-btn:hover {
    background: #64748b;
    color: white;
    border-color: #64748b;
}

/* ============================================
   POINTERS SECTION STYLES
   ============================================ */
.pointer-concept-card {
    background: var(--color-bg-secondary, #f8fafc);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.75rem;
    padding: 1.25rem;
    margin: 1rem 0;
    border-left: 4px solid #2563eb;
}

.pointer-concept-card h4 {
    margin: 0 0 0.5rem 0;
    color: #2563eb;
    font-size: 0.9rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.pointer-concept-card.warning {
    border-left-color: #d97706;
}
.pointer-concept-card.warning h4 { color: #d97706; }

.pointer-concept-card.success {
    border-left-color: #16a34a;
}
.pointer-concept-card.success h4 { color: #16a34a; }

.pointer-concept-card.error {
    border-left-color: #dc2626;
}
.pointer-concept-card.error h4 { color: #dc2626; }

.pointer-concept-card p {
    margin: 0;
    font-size: 0.95rem;
}

.visual-memory-diagram {
    background: var(--color-bg-secondary, #f8fafc);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.75rem;
    padding: 1rem;
    margin: 1rem 0;
    overflow: hidden;
    max-width: 100%;
}

.visual-memory-diagram svg,
.visual-example-diagram svg,
.operator-card svg {
    max-width: 100%;
    height: auto;
    display: block;
}

.pointer-operators-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin: 1rem 0;
}

@media (max-width: 768px) {
    .pointer-operators-grid {
        grid-template-columns: 1fr;
    }
}

.operator-card {
    background: var(--color-bg-secondary, #f8fafc);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.75rem;
    padding: 1.25rem;
}

.operator-card.address-operator {
    border-left: 4px solid #d97706;
}

.operator-card.value-operator {
    border-left: 4px solid #2563eb;
}

.operator-card h4 {
    margin: 0 0 0.75rem 0;
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary, #0f172a);
}

.operator-card p {
    font-size: 0.9rem;
    color: var(--color-text-secondary, #64748b);
    margin-bottom: 0.75rem;
}

.operator-card pre {
    background: #1e293b;
    padding: 0.75rem;
    border-radius: 0.5rem;
    margin: 0.75rem 0 0 0;
    font-size: 0.8rem;
}

.operator-card pre code {
    background: none;
    color: #e2e8f0;
}

.pointer-rules-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
    margin: 1rem 0;
}

@media (max-width: 768px) {
    .pointer-rules-grid {
        grid-template-columns: 1fr;
    }
}

.rule-card {
    background: var(--color-bg-secondary, #f8fafc);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.5rem;
    padding: 1rem;
}

.rule-card.do-rule {
    border-left: 3px solid #16a34a;
}

.rule-card strong {
    color: #16a34a;
    display: block;
    margin-bottom: 0.5rem;
    font-size: 0.85rem;
}

.rule-card p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--color-text-secondary, #64748b);
}

.visual-example-diagram {
    background: var(--color-bg-secondary, #f8fafc);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.5rem;
    padding: 1rem;
    margin: 0.75rem 0;
    overflow: hidden;
    max-width: 100%;
}

.pointer-table-container {
    overflow-x: auto;
    margin: 1rem 0;
}

.pointer-decision-table {
    width: 100%;
    border-collapse: collapse;
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.5rem;
    overflow: hidden;
    font-size: 0.9rem;
}

.pointer-decision-table th {
    background: var(--color-bg-tertiary, #f1f5f9);
    color: var(--color-text-primary, #0f172a);
    padding: 0.75rem 1rem;
    text-align: left;
    font-weight: 600;
    font-size: 0.8rem;
    text-transform: uppercase;
    border-bottom: 2px solid var(--color-border, #e2e8f0);
}

.pointer-decision-table td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--color-border, #e2e8f0);
}

.pointer-decision-table tr:last-child td {
    border-bottom: none;
}

.pointer-decision-table td.yes {
    color: #16a34a;
    font-weight: 600;
}

.pointer-decision-table td.no {
    color: #dc2626;
    font-weight: 600;
}

.dos-donts-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin: 1rem 0;
}

@media (max-width: 768px) {
    .dos-donts-grid {
        grid-template-columns: 1fr;
    }
}

.dos-column, .donts-column {
    background: var(--color-bg-secondary, #f8fafc);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.75rem;
    padding: 1.25rem;
}

.dos-column {
    border-left: 4px solid #16a34a;
}

.donts-column {
    border-left: 4px solid #dc2626;
}

.dos-column h4 {
    color: #16a34a;
    margin: 0 0 1rem 0;
    font-size: 1rem;
}

.donts-column h4 {
    color: #dc2626;
    margin: 0 0 1rem 0;
    font-size: 1rem;
}

.dos-column ul, .donts-column ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.dos-column li, .donts-column li {
    margin-bottom: 0.5rem;
    padding-left: 1.25rem;
    position: relative;
    font-size: 0.9rem;
    color: var(--color-text-secondary, #64748b);
}

.dos-column li::before {
    content: "✓";
    position: absolute;
    left: 0;
    color: #16a34a;
    font-weight: bold;
}

.donts-column li::before {
    content: "✗";
    position: absolute;
    left: 0;
    color: #dc2626;
    font-weight: bold;
}

.mental-model-grid {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.mental-model-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
}

.model-operator {
    flex: 0 0 50px;
    background: var(--color-bg-tertiary, #f1f5f9);
    border: 2px solid #2563eb;
    border-radius: 0.5rem;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: #2563eb;
    font-size: 1.25rem;
    font-family: 'JetBrains Mono', monospace;
}

.model-text {
    flex: 1;
}

.model-text strong {
    color: #2563eb;
    display: block;
    margin-bottom: 0.25rem;
}

.model-text p {
    margin: 0;
    font-size: 0.9rem;
}

.trap-card {
    background: var(--color-bg-secondary, #f8fafc);
    border: 2px solid #f59e0b;
    border-radius: 0.75rem;
    padding: 1.25rem;
    margin: 1rem 0;
}

.trap-card h4 {
    margin: 0 0 0.75rem 0;
    color: #f59e0b;
    font-size: 0.9rem;
    text-transform: uppercase;
    font-weight: 600;
}

.trap-card pre {
    background: #1e293b;
    padding: 0.75rem;
    border-radius: 0.5rem;
    margin: 0.5rem 0;
    font-size: 0.8rem;
}

.trap-card pre code {
    background: none;
    color: #e2e8f0;
}

.trap-solution {
    background: var(--color-bg-tertiary, #f1f5f9);
    border-left: 3px solid #16a34a;
    padding: 0.75rem;
    margin-top: 0.75rem;
    border-radius: 0.25rem;
    font-size: 0.85rem;
}

.trap-solution strong {
    color: #16a34a;
}

.decision-tree {
    background: var(--color-bg-secondary, #f8fafc);
    border: 1px solid var(--color-border, #e2e8f0);
    border-left: 4px solid #16a34a;
    border-radius: 0.75rem;
    padding: 1.25rem;
}

.decision-tree pre {
    background: none;
    padding: 0;
    margin: 0;
    font-size: 0.85rem;
    font-family: 'JetBrains Mono', monospace;
    color: var(--color-text-primary, #0f172a);
    white-space: pre-wrap;
    border: none;
}

/* ============================================
   ORIGINAL GUIDE PAGE STYLES
   ============================================ */
/* Enhanced Guide Page Styles - Go Theme */
.guide-page {
    max-width: 1100px;
    margin: 0 auto;
    padding: 2rem;
}

/* Breadcrumb */
.breadcrumb {
    margin-bottom: 1.5rem;
    font-size: 0.9rem;
}

.breadcrumb a {
    color: #00ADD8;
    text-decoration: none;
}

.breadcrumb a:hover {
    text-decoration: underline;
}

.breadcrumb-sep {
    margin: 0 0.5rem;
    color: var(--color-text-muted, #94a3b8);
}

/* Guide Header */
.guide-header {
    text-align: center;
    margin-bottom: 2.5rem;
    padding: 2.5rem;
    background: linear-gradient(135deg, #00ADD810 0%, #5DC9E210 100%);
    border-radius: 1rem;
    border: 1px solid #00ADD830;
}

.guide-badge {
    display: inline-block;
    padding: 0.35rem 1rem;
    background: linear-gradient(135deg, #00ADD8 0%, #5DC9E2 100%);
    color: white;
    border-radius: 2rem;
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 1rem;
}

.guide-header h1 {
    margin: 0.5rem 0;
    font-size: 2.5rem;
    background: linear-gradient(135deg, #00ADD8 0%, #007d9c 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.guide-description {
    color: var(--color-text-secondary, #475569);
    font-size: 1.15rem;
    margin-bottom: 1.5rem;
}

.guide-stats {
    display: flex;
    justify-content: center;
    gap: 2rem;
    flex-wrap: wrap;
}

.stat-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-text-secondary, #475569);
    font-size: 0.9rem;
}

.stat-icon {
    font-size: 1.1rem;
}

/* Navigation */
.guide-nav {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 2rem;
    padding: 0.75rem;
    background: var(--color-bg-primary, #ffffff);
    border-radius: 1rem;
    border: 1px solid var(--color-border, #e2e8f0);
    position: sticky;
    top: 70px;
    z-index: 50;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    flex-wrap: wrap;
}

.guide-nav-link {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.6rem 1.2rem;
    border-radius: 0.5rem;
    text-decoration: none;
    color: var(--color-text-secondary, #475569);
    font-weight: 500;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.guide-nav-link:hover {
    background: var(--color-bg-secondary, #f8fafc);
    color: var(--color-text-primary, #0f172a);
}

.guide-nav-link.active {
    background: linear-gradient(135deg, #00ADD8 0%, #007d9c 100%);
    color: white;
}

.nav-icon {
    font-size: 1rem;
}

/* Section Headers */
.section-header {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 3px solid #00ADD8;
}

.section-header h2 {
    font-size: 1.75rem;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.section-icon {
    font-size: 1.5rem;
}

.section-description {
    color: var(--color-text-secondary, #475569);
    font-size: 1.05rem;
    margin: 0;
}

/* Guide Section */
.guide-section {
    margin-bottom: 3rem;
    padding-top: 1rem;
}

/* Topic Block */
.topic-block {
    background: var(--color-bg-primary, #ffffff);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 1rem;
    padding: 1.75rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.topic-block.highlight-block {
    background: linear-gradient(135deg, #00ADD808 0%, #ffffff 100%);
    border-color: #00ADD840;
}

.block-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.block-header.warning-header {
    color: #f59e0b;
}

.block-icon {
    font-size: 1.5rem;
}

.topic-block h3 {
    font-size: 1.3rem;
    margin: 0;
    color: var(--color-text-primary, #0f172a);
}

.topic-block h4 {
    font-size: 1.1rem;
    margin-top: 1.75rem;
    margin-bottom: 0.75rem;
    color: #00ADD8;
}

.topic-block p {
    color: var(--color-text-secondary, #475569);
    margin-bottom: 1rem;
    line-height: 1.7;
}

.topic-block ul, .topic-block ol {
    margin-bottom: 1rem;
    padding-left: 1.5rem;
    color: var(--color-text-secondary, #475569);
}

.topic-block li {
    margin-bottom: 0.5rem;
    line-height: 1.6;
}

.topic-block code {
    background: #00ADD815;
    padding: 0.2rem 0.5rem;
    border-radius: 0.25rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.875rem;
    color: #00ADD8;
}

/* Concept Grid */
.concept-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-top: 1.5rem;
}

.concept-card {
    background: var(--color-bg-secondary, #f8fafc);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.75rem;
    padding: 1.25rem;
    text-align: center;
    transition: all 0.2s;
}

.concept-card:hover {
    border-color: #00ADD8;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 173, 216, 0.15);
}

.concept-icon {
    font-size: 2rem;
    display: block;
    margin-bottom: 0.75rem;
}

.concept-card h4 {
    margin: 0 0 0.5rem 0;
    color: var(--color-text-primary, #0f172a);
    font-size: 1rem;
}

.concept-card p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--color-text-muted, #94a3b8);
}

/* Feature List */
.feature-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin: 1.5rem 0;
}

.feature-item {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
    padding: 1rem;
    background: var(--color-bg-secondary, #f8fafc);
    border-radius: 0.75rem;
    border-left: 4px solid #00ADD8;
}

.feature-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
}

.feature-item strong {
    color: var(--color-text-primary, #0f172a);
    display: block;
    margin-bottom: 0.25rem;
}

.feature-item p {
    margin: 0;
    font-size: 0.9rem;
}

/* Info Box */
.info-box {
    background: linear-gradient(135deg, #00ADD810 0%, #5DC9E210 100%);
    border: 1px solid #00ADD840;
    border-radius: 0.75rem;
    padding: 1.25rem;
    margin: 1.5rem 0;
}

.info-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
    font-weight: 600;
    color: #00ADD8;
}

.info-icon {
    font-size: 1.25rem;
}

.info-box p {
    margin: 0;
    line-height: 1.6;
}

/* Diagram Container */
.diagram-container {
    background: var(--color-bg-secondary, #f8fafc);
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
    overflow-x: auto;
}

.diagram-title {
    font-weight: 600;
    color: var(--color-text-primary, #0f172a);
    margin-bottom: 1rem;
    text-align: center;
}

/* Comparison Table */
.comparison-table {
    margin: 1.5rem 0;
    border: 1px solid var(--color-border, #e2e8f0);
    border-radius: 0.75rem;
    overflow: hidden;
}

.comparison-header {
    background: linear-gradient(135deg, #00ADD8 0%, #007d9c 100%);
    padding: 0.75rem 1rem;
}

.comparison-title {
    color: white;
    font-weight: 600;
    margin: 0;
}

.comparison-table table {
    width: 100%;
    border-collapse: collapse;
}

.comparison-table th,
.comparison-table td {
    padding: 0.75rem 1rem;
    text-align: left;
    border-bottom: 1px solid var(--color-border, #e2e8f0);
}

.comparison-table th {
    background: var(--color-bg-secondary, #f8fafc);
    font-weight: 600;
    color: var(--color-text-primary, #0f172a);
}

.comparison-table td {
    color: var(--color-text-secondary, #475569);
    font-size: 0.9rem;
}

.comparison-table tr:last-child td {
    border-bottom: none;
}

/* Code Example */
.code-example {
    position: relative;
    margin: 1.25rem 0;
}

.code-example pre {
    background: #1e293b;
    border-radius: 0.75rem;
    padding: 1.25rem;
    padding-top: 3rem;
    overflow-x: auto;
    margin: 0;
    border: 1px solid #334155;
}

.code-example pre code {
    background: none;
    padding: 0;
    color: #e2e8f0;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85rem;
    line-height: 1.6;
}

.run-code-btn {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    padding: 0.5rem 1.25rem;
    background: linear-gradient(135deg, #00ADD8 0%, #007d9c 100%);
    color: white;
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
    font-size: 0.8rem;
    font-weight: 600;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.run-code-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 173, 216, 0.4);
}

.run-code-btn:disabled {
    background: #64748b;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

/* Code Output */
.code-output {
    margin-top: 0.5rem;
}

.code-output pre {
    padding: 1rem;
    border-radius: 0.5rem;
    font-size: 0.85rem;
    max-height: 300px;
    overflow-y: auto;
}

.success-output {
    background: #0f172a;
    border: 1px solid #10b98140;
    color: #4ade80;
}

.error-output {
    background: #1e0a0a;
    border: 1px solid #ef444440;
    color: #f87171;
}

/* Mermaid diagrams */
.mermaid {
    display: flex;
    justify-content: center;
}

/* Responsive */
@media (max-width: 768px) {
    .guide-page {
        padding: 1rem;
    }

    .guide-header {
        padding: 1.5rem;
    }

    .guide-header h1 {
        font-size: 1.75rem;
    }

    .guide-stats {
        gap: 1rem;
    }

    .guide-nav {
        position: static;
        flex-direction: column;
    }

    .guide-nav-link {
        justify-content: center;
    }

    .concept-grid {
        grid-template-columns: 1fr;
    }

    .comparison-table {
        font-size: 0.85rem;
    }

    .code-example pre {
        padding-top: 3.5rem;
    }

    /* SVG diagrams mobile fixes */
    .visual-memory-diagram,
    .visual-example-diagram {
        padding: 0.5rem;
        margin: 0.5rem 0;
    }

    .visual-memory-diagram svg,
    .visual-example-diagram svg,
    .operator-card svg {
        min-width: 280px;
        width: 100%;
    }

    .operator-card {
        padding: 0.75rem;
    }

    .operator-card svg {
        margin: 8px 0;
    }
}

/* Syntax highlighting colors for Go code */
.code-example pre code .hljs-keyword,
.code-example pre code .token.keyword {
    color: #ff7b72;
}

.code-example pre code .hljs-built_in,
.code-example pre code .hljs-type,
.code-example pre code .token.builtin {
    color: #79c0ff;
}

.code-example pre code .hljs-string,
.code-example pre code .token.string {
    color: #a5d6ff !important;
}

.code-example pre code .hljs-number,
.code-example pre code .token.number {
    color: #79c0ff;
}

.code-example pre code .hljs-comment,
.code-example pre code .token.comment {
    color: #8b949e;
    font-style: italic;
}

.code-example pre code .hljs-function,
.code-example pre code .hljs-title,
.code-example pre code .token.function {
    color: #d2a8ff;
}

.code-example pre code .hljs-params,
.code-example pre code .token.parameter {
    color: #e6edf3;
}

.code-example pre code .hljs-variable,
.code-example pre code .token.variable {
    color: #ffa657;
}

.code-example pre code .hljs-operator,
.code-example pre code .token.operator {
    color: #ff7b72;
}

.code-example pre code .hljs-punctuation,
.code-example pre code .token.punctuation {
    color: #e6edf3;
}

/* Ensure string literals are visible */
.code-example pre code span[class*="string"] {
    color: #a5d6ff !important;
}
</style>

<script>
(function() {
    // Navigation highlighting
    const navLinks = document.querySelectorAll('.guide-nav-link');
    const sections = document.querySelectorAll('.guide-section');

    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            navLinks.forEach(l => l.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // Scroll spy
    window.addEventListener('scroll', function() {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop - 150;
            if (pageYOffset >= sectionTop) {
                current = section.getAttribute('id');
            }
        });

        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('data-section') === current) {
                link.classList.add('active');
            }
        });
    });

    // Run code buttons
    document.querySelectorAll('.run-code-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const codeBlock = this.parentElement.querySelector('code');
            const code = codeBlock.textContent;
            const language = this.dataset.language || 'go';

            this.disabled = true;
            this.textContent = 'Running...';

            fetch('/api/run', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({code: code, language: language})
            })
            .then(response => response.json())
            .then(data => {
                if (data.id) {
                    let pollCount = 0;
                    const maxPolls = 120;
                    const checkResult = () => {
                        pollCount++;
                        fetch('/api/execution/' + data.id)
                        .then(r => r.json())
                        .then(result => {
                            if (result.state === 'complete' || result.state === 'error' || result.state === 'stopped') {
                                this.disabled = false;
                                this.textContent = 'Run Code';

                                let outputDiv = this.parentElement.querySelector('.code-output');
                                if (!outputDiv) {
                                    outputDiv = document.createElement('div');
                                    outputDiv.className = 'code-output';
                                    this.parentElement.appendChild(outputDiv);
                                }

                                if (result.error) {
                                    outputDiv.innerHTML = '<pre class="error-output">' + escapeHtml(result.error) + '</pre>';
                                } else {
                                    outputDiv.innerHTML = '<pre class="success-output">' + escapeHtml(result.output || 'No output') + '</pre>';
                                }
                            } else if (pollCount >= maxPolls) {
                                this.disabled = false;
                                this.textContent = 'Run Code';
                                let outputDiv = this.parentElement.querySelector('.code-output');
                                if (!outputDiv) {
                                    outputDiv = document.createElement('div');
                                    outputDiv.className = 'code-output';
                                    this.parentElement.appendChild(outputDiv);
                                }
                                outputDiv.innerHTML = '<pre class="error-output">Execution timed out</pre>';
                            } else {
                                setTimeout(checkResult, 500);
                            }
                        });
                    };
                    checkResult();
                }
            })
            .catch(err => {
                this.disabled = false;
                this.textContent = 'Run Code';
                alert('Error: ' + err.message);
            });
        });
    });

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    // Initialize Mermaid if available
    if (typeof mermaid !== 'undefined') {
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    }

    // Highlight code if hljs available
    if (typeof hljs !== 'undefined') {
        document.querySelectorAll('.code-example pre code').forEach(block => {
            hljs.highlightElement(block);
        });
    }
})();

// Roadmap navigation function
function scrollToTopic(sectionId) {
    const section = document.getElementById(sectionId);
    if (section) {
        const headerOffset = 100;
        const elementPosition = section.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

        window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
        });

        // Update nav active state
        document.querySelectorAll('.guide-nav-link').forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('data-section') === sectionId) {
                link.classList.add('active');
            }
        });
    }
}

// Copy prompt function for roadmap cards
function copyPrompt(promptText) {
    navigator.clipboard.writeText(promptText).then(() => {
        // Show feedback
        const notification = document.createElement('div');
        notification.textContent = 'Prompt copied to clipboard!';
        notification.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #00ADD8;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 173, 216, 0.4);
            animation: slideIn 0.3s ease;
        `;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => notification.remove(), 300);
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy:', err);
        // Fallback for older browsers
        const textarea = document.createElement('textarea');
        textarea.value = promptText;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('Prompt copied!');
    });
}

// Add animations for notifications
const styleSheet = document.createElement('style');
styleSheet.textContent = `
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOut {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
    }
`;
document.head.appendChild(styleSheet);
</script>
